YCLIENTS REST API
Это официальный документ, описывающий взаимодействие с сервисом онлайн-бронирования YCLIENTS.

При проектировании методов, мы старались придерживаться архитектуры REST

Все обращения к протоколу осуществляются с использованием SSL-шифрования.

Лимиты 200 запросов в минуту, или 5 запросов в секунду на один IP-адрес.

URL API: https://api.yclients.com

Вопросы, пожелания, сообщения об ошибках можно направлять по адресу support@yclients.com

API позволяет сторонним разработчикам выполнять большинство операций с платформой YCLIENTS.

Внимание! Большинство обращений в техническую поддержку связаны с тем, что разработчики не читают документацию. Обязательно прочтите раздел INTRODUCTION полностью и внимательно ознакомьтесь с информацией на других ресурсах, на которые мы ссылаемся. Для тестирования запросов мы рекомендуем использовать сервис Postman, при обращении в службу поддержки используйте скриншоты из Postman.

SDK
Ниже приведены ссылки на SDK сторонних разработчиков. В ближайшее время мы планируем подключиться к их улучшению и развитию. И всегда привествуем Opensource инициативы, если у вас есть возможности и желание развивать одну из предложенных библиотек это принесет общую пользу. Если решите создать свою - сообщите нам о ней, мы примем участие в развитии и разместим ссылку на нее здесь.

PHP: https://github.com/SlowProg/yclients-api

Кейсы интеграции с YCLIENTS
Обмен данными с программой для автоматизации и учета.

Интеграция онлайн-записи со стронними сайтами и мобильными приложениями (каталоги компаний, приложения компаний и т.п.)

Общее описание обмена данными с YCLIENTS
API для интеграции с YCLEINTS содержит две группы методов:

Методы требующие авторизацию пользователя и авторизацию партнера
Методы не требующие авторизации пользователя, но требующие авторизацию партнера
Авторизация запросов API
Для обращений и к первой и ко второй группе методов требуется авторизация партнера. Т.е. передача уникального hash-ключа партнера.

Авторизация запросов к API производится в соответствии с RFC 6749 "Resource Owner Password Credentials Grant". При запросах к API в HTTP заголовок Authorization должен быть включен ключ доступа в следущем формате:

Authorization: Bearer <partner token>
Для того, чтобы получить этот ключ нужно зарегистрироваться в маркетплейсе интеграций, а потом скопировать API-ключ в разделе «Настройки аккаунта».

Для получения API-ключа пользователя используйте метод auth. Передавать сам ключ нужно также в заголовке запроса (после ключа партнера через запятую):

Authorization: Bearer <partner token>, User <user token>
Нужна ли авторизация пользователя для работы с теми или иными сущностями нужно смотреть в описаниях формата данных и примерах запросов.

Версионирование API
Текущая версия формата ответа 2.0, в нем всегда присутствуют секции "success", "data", "meta".

Указать версию необходимо с помощью заголовка

Accept: application/vnd.yclients.v2+json
Дата и время
Все даты в API представлены в виде строк в формате ISO 8601:

"2014-09-21T23:00:00.000+03:00"
Длительности услуг и других сущностей передаются в секундах. Например, если услуга длиться 15 минут, то формат данных следующий:

{ "length": 900 }
Концепты YCLIENTS API
API позволяет работать с основными сущностями платформы:

Компания

Пользователь Пользователи могут управлять компаниями, они имеют права доступа к определенным настройкам компании. Не все пользователи имеют доступ ко всем настройкам. Для того, чтобы изменять те или иные настройки нужно сначала получить API-ключ пользователя с соответсвующими правами.

Категория услуг Все услуги компании группируются в рамках категории услуг .

Услуга Как правило, запись производится на определенную услугу, которую оказывает определенный сотрудник в определенной компании. Услуга имеет диапазон стоимости и некоторые другие параметры.

Сотрудник Как правило, запись производится, к определенному сотруднику или ресурсу (например, подъемник или квест-комната).

Расписание сотрудника У каждого сотрудника есть график работы - итервалы времени, в которое сотрудник работает с клиентами.

Свободное время сотрудника Время на которое можно записаться к сотруднику, т.е. интервалы времени, в которые он свободен.

Запись Интервал времени, в которое конкретный сотрудник оказывает конкретному клиенту услуги. Во время записи сотрудник занят.

Клиент Человек, который записывался на услугу в компанию.

Модель данных YCLIENTS API
Для работы с данными используется четыре основных структуры:

Сущность Одна из перечисленных выше сущностей, обладающая своими уникальными свойствами и параметрами. Сущности можно получать, изменять и удалять

Коллекция сущностей Набор сущностей. Например, список компаний или список услуг, оказываемых компаний. В коллекции сущностей можно добавлять сущности.

Связь сущностей Например, связь сотрудника и услуги определяет, что конкретный сотрудник оказывает конкретную услугу. У связи могут быть свои свойства, например, индивидуальная цена услуги для конкретного сотрудника

Коллекция связей сущностей Например, список услуг, оказываемых сотрудником и их свойсва. В коллекции можно добавлять связи

Авторизация
Для вызова многих методов требуется получить API-ключ пользователя, который будет использоваться для доступа к закрытым данным.

Авторизовать пользователя

post
/api/v1/auth
При смене пароля пользователем его API-ключ изменится и потребуется новая авторизация.
⚠️ В зависимости от того, включена у пользователя 2fa или нет, будет зависеть ответ и необходимость отправить запрос авторизации с кодом подтверждения.

Authorizations:
bearer
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
One of Базовая авторизацияПередать код подтверждения 2FA
login
required
string
Номер телефона или Email

password
required
string
Пароль

Responses
200 Требуется ввести код подтверждения 2FA
Response Schema: application/json
success
boolean
Успешность запроса

data
object
meta
Array of arrays
201 Пользователь авторизован
Response Schema: application/json
id
integer <int32>
Идентификатор пользователя

user_token
string
User_token пользователя

name
string
Имя пользователя

phone
string
Телефон пользователя

login
string
Логин пользователя

email
string
Почтовый адрес пользователя

avatar
string
Путь к файлу аватарки пользователя

is_approved
boolean
Подтвержден ли пользователь в системе

is_email_confirmed
boolean
Подтвержден ли email у пользователя

Request samples
Payload
Content type
application/json
Example

Базовая авторизация
Базовая авторизация

Copy
{
"login": "testuser@yclients.com",
"password": "testpass"
}
Response samples
200201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"uuid": "qwer1234-qw12-1234-q123-5c9a37d530cd",
"flow": "login",
"transport": {},
"refresh_ttl_sec": 60,
"attempts_left": 3
},
"meta": [ ]
}
Онлайн-запись
Для реализации клиентской части онлайн-записи используется следующий набор методов. Они адаптированы для пользовательских сценариев онлайн-записи, в отличии от других REST-методов, которые лучше использовать для интеграциионных целей.

Получить настройки формы бронирования

get
/api/v1/bookform/{id}
Каждый клиент сервиса YCLIENTS, может создать неограниченное количество форм онлайн-записи с разным дизайном и для разных сценариев записи.

Обычно, id формы бронирования хранится в поддомене, например: https://w123.yclients.com, где 123 - id формы записи. С помощью этого параметра можно получить все остальные необходимые для реализации онлайн-записи параметры, понять, будет происходить запись в конкретную компанию или в сеть компаний.

Для сетевого виджета необходимо будет дополнительно обратится к методу [GET] /companies с фильтром company_id и получить список копаний, в которые будет производиться запись.

Объект содержащий настройки формы бронирование имеет следующие поля:

Поле	Тип	Описание
steps	Массив объектов	Шаги формы бронирования со своими настройками
style	Object	Настройки дизайна формы бронирования
group_id	number	Идентификатор сети компаний (0 - если форма записи для несетевой компании)
company_id	number	Идентификатор компании (возвращается всегда, используется для получения дополнительных настроек)
phone_confirmation	boolean	Нужно ли подтверждать телефон по смс (если groupid = 0 (не групповая форма), иначе смотреть в настройки каждой компании отдельно)
lang	string	Язык формы бронирования (код из массива langs)
langs	array of object	Список языков виджета
comment_required	boolean	Является ли поле с комментарием к записи обязательным для заполнения
metrika_counter_id	string	Идентификатор Яндекс.Метрики
google_analytics_id	string	Идентификатор Google Analytics
facebook_pixel_id	string	Идентификатор Facebook Pixel
vkontakte_pixel_id	string	Идентификатор Вконтакте пиксель
app_metrika_id	string	Идентификатор Yandex AppMetrika
sms_enabled	boolean	Доступна ли отправка смс
comment_input_name	string (optional)	Заголовок для поля с вводом комментария к записи (если не задано, то используется значение по умолчанию)
booking_notify_text	string (optional)	Текст уведомления, которое выводится (если задано) на шаге ввода контактных данных
is_show_privacy_policy	boolean	Нужно ли отображать пользователю текст соглашения о политике обработки персональных данных
specialization_display_mode	number	Выводить специализацию или должность сотрудника. 0 - Специализация, 1 - Должность
Массив steps состоит из объектов которые имеют следующие поля:

Поле	Тип	Описание	Для каких шагов указан
step	string	Шаг city/company/service/master/datetime/contact/confirm	Для всех
title	string	Название шага для вывода в интерфейсе	Для всех
num	number	Каким по счету должен выводиться данный шаг (начиная с 1)	Для всех
default	string или number	Значение по умолчанию для данного шага, если задано	Для всех, кроме datetime
hidden	boolean	Скрыть данный шаг при бронировании или нет	Для всех
date_hidden	boolean	Скрыть данный шаг при бронировании или нет	Для datetime
time_hidden	boolean	Скрыть данный шаг при бронировании или нет	Для datetime
date_default	string	Значение по умолчанию для данного шага, если задано	Для datetime
time_default	number	Значение по умолчанию для данного шага, если задано	Для datetime
Объект style имеет следующие поля:

Поле	Тип	Описание
show_header	boolean	Выводить шапку и меню или нет
logo	string	Путь до картинки логотипа
header_background	string	Путь до картинки фона подзаголовка
menu_background	string	Путь до картинки фона меню
primaryPalette	string	Главный цвет формы (все цвета из списка: red, pink, purple, deep-purple, indigo, blue, light-blue, cyan, teal, green, light-green, lime, yellow, amber, orange, deep-orange, brown, grey, blue-grey, white, black)
accentPalette	string	Второстепенный цвет формы (полупрозрачный cover подзаголовка)
warnPalette	string	Цвет кнопок формы записи
backgroundPalette	string	Цвет фона формы записи
Authorizations:
bearer
path Parameters
id
required
number
Example: 1
id формы бронирования

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"steps": [],
"style": {},
"group_id": 1,
"company_id": 1,
"phone_confirmation": false,
"lang": "ru-RU",
"langs": [],
"comment_required": false,
"metrika_counter_id": "50217133",
"google_analytics_id": "UA-125358345-1",
"facebook_pixel_id": "2218788388343154",
"vkontakte_pixel_id": "VK-RTRG-96471-KZ24cpR",
"app_metrika_id": "46ab3b93-1bc6-457d-82f0-c1b51f39b01e",
"sms_enabled": true
},
"meta": [ ]
}
Получить параметры интернационализации

get
/api/v1/i18n/{langCode}
Перевод доступен на один из языков:

Русский - 'ru-RU'
Латвийский - 'lv-LV'
Английский - 'en-US'
Эстонский - 'ee-EE'
Литовский - 'lt-LT'
Немецкий - 'de-DE'
Украинский - 'uk-UK'
Authorizations:
bearer
path Parameters
langCode
required
string
Example: ru-RU
Код языка. Один из набора 'ru-RU', 'lv-LV', 'en-US', 'ee-EE', 'lt-LT', 'de-DE', 'uk-UK'

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
404
object
action
object
tips
object
payment-status
object
user-data-form
object
and
string
terms-of-agreement
string
data-processing
string
license-agreement
string
personal-data
string
buy-for
string
group_booking
object
geo
object
tooltips
object
prepaid
object
back
string
backCity
string
backFilials
string
backRecordType
string
filials
string
my_profile
string
about_us
string
record
object
at
string
on
string
h
string
m
string
from
string
dist_m
string
dist_km
string
yesterday
string
today
string
tomorrow
string
Close
string
Yes
string
No
string
refresh
string
online_record_disabled
string
online_record_disabled_long_text
string
address
object
common
object
notification
object
header
object
loyalty
object
save
string
proceed
string
profile
object
registration
object
menu
object
footer
object
city
object
company
object
steps
object
master
object
cart
object
reviews
object
date
object
time
object
service
object
confirm
object
login
object
Jan
string
Feb
string
March
string
Mar
string
Apr
string
May
string
Jun
string
Jul
string
Aug
string
Sep
string
Oct
string
Nov
string
Dec
string
activity
object
button
object
landscape
string
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"404": {
"not-found": "Кажется, такой страницы не существует",
"not-found-record": "Такая запись не существует.",
"go-home": "На главную"
},
"action": {
"send": "Отправить"
},
"tips": {
"terms": {},
"review-sent": "Отзыв отправлен",
"your-mark": "Ваша оценка",
"leave-a-review": "Оставьте отзыв",
"leave-a-tip-to-a-specialist": "Оставить чаевые специалисту",
"credited": "Чаевые зачислены",
"visit-amount": "Сумма визита",
"will-be-written-off": "Будет списано",
"at-time": "в",
"rate-specialist-to-sent-feedback": "Поставьте оценку специалисту, чтобы отправить отзыв",
"title": "Чаевые",
"tips-required": "Пожалуйста, выберите сумму чаевых",
"review-or-tips-required": "Кажется, пока нечего отправить специалисту",
"enter-sum": "Введите сумму",
"custom-sum": "Своя сумма",
"cancel-tips": "Отменить чаевые",
"bad-sum": "Чаевые должны быть указаны суммой"
},
"payment-status": {
"payment-error": "Ошибка оплаты. Повторите попытку",
"payment-redirect": "Вас должно направить на платежную систему.",
"payment-config-error": "Ошибка в настройке платежной системы",
"contact-us-for-questions": "Свяжитесь с нами если у вас остались вопросы.",
"contacts": "Контакты",
"order-registered": "Заявка оформлена",
"order-paid": "Заказ оплачен",
"retry": "Повторить",
"order-created-successfully": "Заказ успешно создан. С вами свяжется наш представитель для уточнения деталей.",
"order-is-being-processed": "Операция обрабатывается",
"get-payment-data": "Получение данных о платеже",
"transaction-number": "Номер транзакции",
"payment-transaction-info-1": "Если Вам пришел чек, то покупка успешно завершена. Проверьте указанную при покупке почту.",
"payment-transaction-info-2": "    Если чек не пришел, попробуйте снова или обратитесь к нам по контактам ниже.",
"order-number-info": "Сообщите этот номер при посещении, чтобы воспользоваться сертификатом или абонементом."
},
"user-data-form": {
"loyalty-phone-tip": "Сообщите этот номер при посещении, чтобы воспользоваться сертификатом или абонементом.",
"name-required": "Необходимо указать имя",
"email-required": "Необходимо указать email",
"loyalty-email": "E-mail для получения чека и покупки",
"agreement-link": "с условиями соглашения",
"data-processing-link": "обработкой данных",
"terms-prefix": "Нажимая на кнопку вы соглашаетесь",
"proceed": "Оформить",
"pay": "Оплатить",
"phone-code": "Код",
"phone": "Телефон",
"invalid-phone": "Некорректный номер"
},
"and": "и",
"terms-of-agreement": "Условия соглашения",
"data-processing": "Обработка данных",
"license-agreement": "Лицензионное соглашение",
"personal-data": "Ваши данные",
"buy-for": "Купить за",
"group_booking": {
"personal_booking": "Индивидуальные услуги",
"group_booking": "Групповые события",
"choose_group_event": "Выберите событие",
"group_events_available": "Доступна запись на групповые события",
"places": "Мест",
"group_events_is_not_available": "На выбранный день нет групповых событий",
"group_events_is_not_available_filial": "В этом филиале пока не настроены групповые события",
"repeat": "Записаться снова",
"duration": "Длительность",
"no_space": "Нет мест",
"not_found": "Нет событий по выбранным фильтрам. Попробуйте изменить параметры фильтрации"
},
"geo": {
"geo_timeout_error": "Не удается определить ваше местоположение. Возможно Вы находитесь вне зоны работы GPS",
"geo_timeout_error_android": "Не удается определить ваше местоположение. Возможно Вы находитесь вне зоны работы GPS. Если у Вас отключена геолокация, ее нужно включить и перезапустить приложение.",
"geo_access_error": "Нет доступа к определению вашего местоположения. Приложение не может показать ближайшие к Вам филиалы. Если у Вас отключена геолокация, ее нужно включить и перезапустить приложение."
},
"tooltips": {
"change_filial": "Теперь Вы будете начинать запись всегда с этого филиала. Изменить филиал можно через пункт меню",
"change_filial_back_button": "Также можно использовать кнопку «Назад» для смены филиала"
},
"prepaid": {
"required": "предоплата обязательна",
"allowed": "предоплата опциональна",
"prepaid_sum": "К оплате онлайн:",
"postpaid_sum": "Оплата на месте:"
},
"back": "Назад",
"backCity": "Города",
"backFilials": "Филиалы",
"backRecordType": "Тип записи",
"filials": "Филиалы",
"my_profile": "Кабинет",
"about_us": "О нас",
"record": {
"show_details": "Смотреть детали",
"is_canceled": "Запись отменена",
"is_canceled_success": "Запись успешно отменена",
"record": "Запись",
"place": "Место",
"master": "Сотрудник",
"service": "Услуга",
"services": "Услуги",
"date": "Дата",
"past": "Прошла",
"through": "Через",
"time": "Время",
"clients_count": "Количество мест:",
"book_visit": "Оформить визит",
"add_service": "+ Добавить услугу",
"add_master": "+ Добавить мастера",
"add_datetime": "+ Добавить дату и время",
"cancel_record": "Отменить запись",
"cancel_record_warning": "После отмены запись будет невозможно восстановить",
"confirm_cancel_record": "Вы уверены, что хотите отменить запись?",
"error_cancel_record": "Вы не можете отменить запись",
"error_cancel_record_new1": "Невозможно отменить запись онлайн. Пожалуйста, свяжитесь с администратором.",
"error_cancel_record_new2_1": "Невозможно отменить запись онлайн за ",
"error_cancel_record_new2_2": "до посещения. Пожалуйста, свяжитесь с администратором.",
"add_to_google_calendar": "Добавить в google-календарь",
"booking_success": "Вы успешно записались!",
"create_new_record": "Записаться еще",
"future_records": "Предстоящие сеансы",
"past_records": "Прошедшие",
"change_record_time": "Перенести запись",
"error_change_record_time": "Невозможно перенести запись онлайн. Пожалуйста, свяжитесь с администратором.",
"error_change_record_time2_1": "Невозможно перенести запись онлайн за ",
"error_change_record_time2_2": "до посещения. Пожалуйста, свяжитесь с администратором.",
"selected_services": "Выбранные услуги",
"calculate_services": "Определяются доступные услуги...",
"change_record_fail": "Ошибка при переносе записи, попробуйте выбрать другое время",
"continue_booking": "Продолжить запись",
"go_to_registration": "Перейти на сайт YCLIENTS",
"repeat": "Повторить запись",
"is_deleted": "Ваша запись удалена."
},
"at": "в",
"on": "на",
"h": "ч.",
"m": "мин.",
"from": "из",
"dist_m": "м",
"dist_km": "км",
"yesterday": "вчера",
"today": "сегодня",
"tomorrow": "завтра",
"Close": "Закрыть",
"Yes": "Да",
"No": "Нет",
"refresh": "Обновить",
"online_record_disabled": "Онлайн запись отключена. <br> Приносим извинения за доставленные неудобства.",
"online_record_disabled_long_text": "Онлайн-запись временно недоступна. Вы по-прежнему можете управлять своими онлайн-записями в личном кабинете, переносить их и удалять.",
"address": {
"about": "О компании",
"address": "Адрес",
"phone": "Телефон",
"phones": "Телефоны",
"schedule": "Время работы",
"site": "Сайт",
"date_and_time": "Дата и время",
"photos": "Фотографии",
"details": "Подробнее о салоне"
},
"common": {
"information": "информация",
"reviews": "отзывы",
"contacts": "контакты"
},
"notification": {
"your_city": "Ваш город <%- city_name %>?",
"yes_my_city": "Да, это мой город",
"no_my_city": "Нет, выбрать город",
"read_all": "Прочитать",
"delete_all": "Удалить",
"deleted_record": "Удаление записи",
"record": "Запись",
"news": "Новости",
"review": "Отзыв о мастере",
"notify": "Уведомление",
"sent": "Отправлено"
},
"header": {
"loyalty_cards": "Карты лояльности",
"widget_settings": "Настройки виджета",
"settings": "Настройки",
"select_town": "Выберите город",
"select_company": "Выберите филиал",
"select_date": "Выбор даты",
"select_master": "Выбор сотрудника",
"select_time": "Выбор времени",
"select_service": "Выбор услуги",
"input_personal": "Ввод контактных данных",
"online_record": "Онлайн-запись",
"selection_of": "Выбор",
"contacts_form": "Оформление",
"record_created": "Запись создана!",
"login": "Вход",
"profile": "Личный кабинет",
"my_records": "Мои записи",
"record_create_disabled": "Онлайн-запись временно недоступна.",
"master-info": "О сотруднике",
"notification": "Уведомления",
"my_notifications": "Мои уведомления",
"none_notifications": "Нет уведомлений",
"cart": "Подтверждение оплаты",
"change_record": "Перенос записи",
"you_booking": "Ваш заказ",
"you_data": "Ваши данные",
"record": "Запись",
"actions": "Действия",
"cancel-record": "Отмена записи",
"booking_again": "Записаться снова",
"choose_time": "Выберите время",
"choose_staff": "Выберите специалиста",
"about_service": "Об услуге",
"records": "Записи",
"confirmation": "Подтверждение"
},
"loyalty": {
"empty-list": "Здесь пока ничего нет",
"points": {},
"no_cards": "У Вас нет ни одной карты.",
"no_certificate": "У Вас нет ни одного сертификата.",
"no_subscription": "У Вас нет ни одного абонемента.",
"discount": "скидка",
"cashback": "cashback",
"paid_amount": "Оплачено",
"sold_amount": "Продано",
"visit_count": "Визиты",
"balance": "Накоплено (cashback)",
"certificate": {},
"subscription": {},
"subscriptions": {},
"programs": {}
},
"save": "Сохранить",
"proceed": "Продолжить",
"profile": {
"name": {},
"noFutureRecords": "У вас нет предстоящих сеансов",
"noPastRecords": "У вас нет прошедших сеансов",
"phone": {},
"email": {},
"password": {},
"error": "При сохранении данных произошла ошибка",
"saved": "Изменения ваших персональных данных сохранены",
"contactsDetails": "Контактные данные",
"your_records": "Ваши записи в салон."
},
"registration": {
"registration": "Регистрация",
"form": {}
},
"menu": {
"account": "Личные данные",
"change_filial": "Изменить филиал",
"change_city": "Изменить город",
"online_record": "Онлайн запись",
"about": "О компании",
"change_lang": "Изменить язык",
"hide_menu": "Скрыть меню",
"login": "Войти",
"myRecords": "Мои записи",
"on-line": "Онлайн-запись",
"logout": "Выйти",
"my": "Личный кабинет",
"favorite": "Избранное",
"change_password": "Смена пароля",
"header": "Меню",
"profile": "Профиль",
"loyalty": "Мои карты",
"loyalty_subscriptions": "Абонементы",
"loyalty_certificates": "Сертификаты"
},
"footer": {
"worked_on": "Работает на",
"worked_on_company_name": "YCLIENTS"
},
"city": {
"town_abbreviation": "г. ",
"service_count": "Количество филиалов:",
"select_filial": "Выбор филиала",
"not_found_cities": "По вашему запросу города не найдены",
"search_cities": "Найти города",
"affiliate": {}
},
"company": {
"list": "Список",
"on_map": "На карте",
"no_companies_text_1": "У Вас нет ни одной активной компании. Для настройки компаний перейдите в",
"lk": "Личный кабинет YCLIENTS",
"no_companies_text_2": "После настройки нажмите кнопку",
"no_companies": "Нет компаний",
"near_session": "Ближайший доступный сеанс для записи:",
"active_master": "Активных специалистов:",
"at_o_clock": "в",
"find_companies": "Найти филиалы",
"not_found_companies": "По вашему запросу филиалы не найдены",
"look_at_the_map": "Посмотреть на карте"
},
"steps": {
"date_and_time": "Дата и время",
"staff": {},
"service": "Услуга",
"time": "Время"
},
"master": {
"master": "Специалист",
"skip_select_master": "Пропустить выбор сотрудника",
"skip_select": "Пропустить выбор",
"near_session": "Ближайшие сеансы",
"nearest_time": "Ближайшее время для записи",
"no_record": "На выбранный день нет свободных сеансов",
"no_record_new": "На эту дату нет свободного времени для записи. Выберите другую дату или другого специалиста",
"no_master": "Сотрудник уволен или больше не работает в этом филиалае",
"any_master": "Не имеет значения",
"record_is_available": "Можно записаться",
"reviews": {},
"prepaid": {}
},
"cart": {
"title": "Выбранные для оплаты услуги",
"confirm": "Подтвердить запись",
"go-to-pay": "Перейти к оплате",
"confirmed": "Запись оплачена",
"pay-success": "Оплата прошла успешно!"
},
"reviews": {
"cancelAddReview": "Отмена",
"later": "Оценить позже",
"addReview": "Оставить отзыв",
"yourReviewMark": "Ваша оценка",
"reviewFieldLabelText": "Ваш отзыв",
"reviewTitle": "Пожалуйста, оцените качество работы приложения",
"reviewMessage": "Напишите предложения по доработкам",
"reviewRequestStoreTitle": "Хотите оставить оценку в магазине?",
"reviewButton": "Оценить",
"thanksForReview": "Спасибо за отзыв"
},
"date": {
"day_of": "Выходной",
"no_record": "Рабочий, записи нет",
"have_record": "Рабочий, запись есть",
"by_month_num": {},
"by_month_short": {}
},
"time": {
"hourCased": {},
"weekCased": {},
"monthCased": {},
"yearCased": {},
"dayCased": {},
"minuteCased": {},
"secondCased": {},
"at_o_clock": "в",
"noTimes": "На выбранный день нет свободных сеансов",
"the_part_of_day": {},
"by_week_day": {},
"by_full_week_day": {}
},
"service": {
"selected": "Выбрано",
"selected_service_count": "Выбрано услуг:",
"noServicesAndEvents": "Не найдено ни одной акции или услуги по вашему запросу",
"noMoreServices": "Нет услуг, на которые можно записаться вместе с выбранными услугами",
"noMoreService": "Нет услуг, на которые можно записаться вместе с выбранной услугой",
"search": "Поиск...",
"sale": "Акции",
"services": "Услуги",
"add": "Добавить услугу",
"add_short": "Добавить",
"currency_short": "р.",
"services_pref": {},
"order_on": "Заказ на",
"price": "цена",
"price_not_available": "Цена не указана",
"price_from": "от",
"price_to": "до",
"unavailable_service": "больше недоступна для онлайн-записи. Хотите выбрать другую?",
"unavailable_services": "больше недоступны для онлайн-записи. Хотите выбрать другие?"
},
"confirm": {
"confirm": "Записаться",
"show_order_details": "Посмотреть детали заказа",
"order_details": "Детали заказа",
"smsNotify": "Напоминание",
"dontSend": "Не отправлять",
"order_on": "Заказ на услуги",
"service_sale": "Услуги по акции",
"license_text": "Duis placerat lectus et justo mollis, nec sodales orci congue. Vestibulum semper non urna ac suscipit. Vestibulum tempor, ligula id laoreet hendrerit, massa augue iaculis magna, sit amet dapibus tortor ligula non nibh.",
"accept": "Нажимая кнопку «Записаться»,  вы соглашаетесь с",
"i_accept": "Я принимаю",
"i_agree": "Я соглашаюсь с тем,",
"accept_inline": "Нажимая кнопку «Записаться»,  вы соглашаетесь",
"accept_personal_data_inline": "обработку персональных данных",
"and_accept": "и принимаете",
"terms_of_agreement": "условиями пользовательского соглашения",
"terms_of_agreement_inline": "условия пользовательского соглашения",
"how_my_personal_data_will_be_processed": "как будут обрабатываться мои персональные данные",
"first_name": "Имя",
"phone": "Телефон",
"will_be_used_to_confirm": "Будет использован для подтверждения",
"comment": "Комментарий",
"email": "Email",
"recording": "Записаться",
"code_and_phone_num": "Код и номер телефона",
"phone_confirm_short": "Подтвердите номер",
"phone_already_exists": "Заданный номер уже используется",
"phone_confirm": "Подтвердите номер телефона",
"phone_confirm_button": "Подтвердить",
"defaultError": "Системная ошибка:",
"you_want_to_book": "Вы хотите записаться",
"your_master": "Ваш мастер",
"waiting_for_you_at_the_address": "Мы ждем вас по адресу",
"untilVisit": {},
"orderErrorsActions": {},
"orderErrors": {},
"errors": {}
},
"login": {
"login": "Вход",
"sms_auth": "SMS авторизация",
"input_code_confirm": "Введите код, полученный по SMS на номер",
"input_phone_num": "Введите номер телефона, на него мы отправим SMS с кодом доступа к личному кабинету",
"input_login_and_password": "Если у вас уже есть логин и пароль введите их ниже",
"code_confirm": "Код подтверждения",
"come_in": "Войти",
"sms_not_send_with_colon": "Если SMS не пришла, повторный код можно запросить через:",
"sms_not_send": "Если SMS не пришла, повторный код можно запросить через ",
"sms_not_send_next_try": "Если SMS не пришла вы можете",
"request_new_sms_code": "Запросить код повторно",
"change_phone_num": "Изменить номер телефона",
"get_code": "Получить код",
"or": "или",
"authorized_as": "Вы авторизовались как",
"come_in_with_login_and_pass": "Войдите с логином и паролем",
"phone_or_email": "Телефон или email",
"pass": "Пароль",
"come_in_with_sms_authorise": "Войдите через SMS авторизацию",
"errors": {}
},
"Jan": "января",
"Feb": "февраля",
"March": "марта",
"Mar": "марта",
"Apr": "апреля",
"May": "мая",
"Jun": "июня",
"Jul": "июля",
"Aug": "августа",
"Sep": "сентября",
"Oct": "октября",
"Nov": "ноября",
"Dec": "декабря",
"activity": {
"places_left": "Осталось мест",
"filters": {}
},
"button": {
"select": "Выбрать",
"select_time": "Выбрать время",
"all_right": "Все верно",
"get_sms": "Получить СМС",
"back": "Вернуться",
"add_more": "Добавить еще",
"remove-from-record": "Удалить из заказа",
"continue": "Продолжить",
"confirm": "Подтвердить",
"canceling": "Отмена",
"more_reviews": "Еще отзывы"
},
"landscape": "Будет удобнее, если повернуть устройство вертикально"
}
Отправить СМС код подтверждения номера телефона

post
/api/v1/book_code/{company_id}
Тело запроса
phone (required, string, '79991234567') - телефон, на который будет отправлен код
fullname (option, sring, Вася) - Имя клиента
Authorizations:
bearer
path Parameters
company_id
required
number
Example: 4564
ID компании

header Parameters
Accept
required
string
application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
phone
required
string
Номер телефона клиента

fulname
string
Имя клиента

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

meta
object
Метаданные

Request samples
Payload
Content type
application/json

Copy
{
"phone": "79991234567",
"fulname": "Вася"
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"meta": {
"message": "Created"
}
}
Проверить параметры записи

post
/api/v1/book_check/{company_id}
После формирования параметров записи(ей) можно проверить их на возможность создание записей.

JSON-Объект содержащий параметры онлайн записи имеет следующие поля:

Поле	Тип	Обязательный	Описание
appointments	Массив объектов	ДА	Параметры записи (услуги, специалисты...)
Массив appointments состоит из объектов, которые имеют следующие поля:

Поле	Тип	Обязательный	Описание
id	number	Да	Идентификатор записи для обратной связи после сохранения (смотри ответ на запрос).
services	array of numbers	НЕТ	Массив идентификаторов услуг, на которые клиент хочет записаться
staff_id	number	ДА	Идентификатор специалиста, к которому клиент хочет записаться (0 если выбран любой мастер)
datetime	datetime	ДА	Дата и время сеанса в формате ISO8601 (передается для каждого сеанса в ресурсе book_times)
В ответ на запрос проверки параметров придет пустой ответ с кодом 201 если параметры записи в порядке и записи могут быть созданы:

Если в ответ придет JSON с HTTP кодом отличным от 201, значит параметры записи не в порядке, а записи не могут быть созданы.

Ошибки, которые может вернуть сервер:

Выбранное время одной из записей уже занято. В этом случае приходит ответ с http-кодом 422 и кодом ошибки 433, а так же в поле id передается идентификатор записи из массива appointments

Нет сотрудников доступных для записи (если был выбран мастер по умолчанию). В этом случае приходит ответ с http-кодом 422 и кодом ошибки 436

Выбранное время одной из записей пересекается с временем записи, создаваемой этим же запросом. В этом случае приходит ответ с http-кодом 422 и кодом ошибки 437, а так же в поле id передается идентификатор записи из массива appointments

Нет записи на указанную услуги. (Компания уже удалили выбранные услуги) В этом случае приходит ответ с http-кодом 422 и кодом ошибки 438

Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
appointments
required
Array of objects
Параметры записи (услуги, специалисты...)

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

meta
object
Метаданные

422 Unprocessable Entity
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

meta
object
Метаданные

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"appointments": [
{},
{}
]
}
Response samples
201422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"meta": {
"message": "Created"
}
}
Создать запись на сеанс

post
/api/v1/book_record/{company_id}
JSON-Объект содержащий параметры онлайн записи имеет следующие поля:

Поле	Тип	Обязательный	Описание
phone	string	ДА	Телефон клиента (например 79161502239)
fullname	string	ДА	Имя клиента
email	string	ДА	Почтовый адрес клиента
appointments	Массив объектов	ДА	Параметры записи (услуги, специалисты...)
code	string	НЕТ	Код подтверждения номера телефона, высланный по СМС (нужен только в случае необходимости подтверждения номера)
notify_by_sms	number	НЕТ	За какое кол-во часов отправить смс напоминание о записи (0 если не нужно напоминать)
notify_by_email	number	НЕТ	За какое кол-во часов отправить email напоминание о записи (0 если не нужно напоминать)
comment	string	НЕТ	Комментарий к записи
api_id	string	НЕТ	Внешний идентификатор записи
custom_fields	key-value object	НЕТ	Значения дополнительных полей карточки клиента, которые сохраняются вместе с записью
Массив appointments состоит из объектов, которые имеют следующие поля:

Поле	Тип	Обязательный	Описание
id	number	Да	Идентификатор записи для обратной связи после сохранения (смотри ответ на запрос).
services	array of numbers	НЕТ	Массив идентификаторов услуг, на которые клиент хочет записаться
staff_id	number	ДА	Идентификатор специалиста, к которому клиент хочет записаться (0 если выбран любой мастер)
datetime	datetime	ДА	Дата и время сеанса в формате ISO8601 (передается для каждого сеанса в ресурсе book_times)
custom_fields	key-value object	НЕТ	Значения дополнительных полей записи, которые сохраняются вместе с записью
Дополнительные поля custom_fields

При создании дополнительных полей записи и клиента (см. раздел "Дополнительные поля") становится возможным передавать собственные значения для полей. Дополнительные поля уникальны для каждой компании. После создания дополнительных полей, их значения для конкретной записи могут передаваться в необязательном поле custom_fields в виде пар ключ-значение где ключ это поле "code" дополнительного поля. Пример:

Создали дополнительное поле записи с code="my_custom_field" type="number", и второе поле code="some_another_field" type="list"
Передали при создании записи в элементе массива appointments еще один атрибут:"" appointments: [{ ... }, { ... custom_fields: { "my_custom_field": 123, "some_another_field": ["first value", "second value"] } }]"
При получении данной записи методом GET впоследствии, это же значение дополнительных полей вернется в ответе
В ответ на запрос создания записи придет массив объектов (кол-во объектов равно кол-ву объектов в массиве appointments) со следующими полями:

Поле	Тип	Описание
id	number	Идентификатор записи, переданный в массиве appointments
record_id	number	Идентификатор созданной в системе записи
record_hash	string	Идентификатор записи, для ее удаления непосредственно сразу после создания
Ошибки, которые необходимо обрабатывать:

Введенный код подтверждения номера из SMS неправильный. В этом случае приходит ответ с http-кодом 422 и кодом ошибки 432

Выбранное время одной из записей уже занято. В этом случае приходит ответ с http-кодом 422 и кодом ошибки 433, а так же в поле id передается идентификатор записи из массива appointments

Пользователь с указанным телефоном в черном списке и не может записываться. В этом случае приходит ответ с http-кодом 403 и кодом ошибки 434

Номер телефона пользователя в неправильном формате. В этом случае приходит ответ с http-кодом 422 и кодом ошибки 431

Не указано имя клиента. В этом случае приходит ответ с http-кодом 422 и кодом ошибки 435

Нет сотрудников доступных для записи (если был выбран мастер по умолчанию). В этом случае приходит ответ с http-кодом 422 и кодом ошибки 436

Выбранное время одной из записей пересекается с временем записи, создаваемой этим же запросом. В этом случае приходит ответ с http-кодом 422 и кодом ошибки 437, а так же в поле id передается идентификатор записи из массива appointments

Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
phone
required
string
Телефон клиента

fullname
required
string
Имя клиента

surname
string
Фамилия клиента

patronymic
string
Отчество клиента

email
required
string
Почтовый адрес клиента

code
number
Код подтверждения телефона, высланный по смс (обязателен если у компании выставлен phone_conformation = true)

comment
string
Коммаентарий к записи

notify_by_sms
number
За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)

notify_by_email
number
За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)

api_id
number
ID записи из внешней системы

is_newsletter_allowed
boolean
Отправка информационно-рекламной рассылки

is_personal_data_processing_allowed
boolean
Обработка персональных данных

appointments
Array of objects
Параметры записей (сеанс, услуги, мастер)

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Данные (массив объектов)

meta
Array of objects
Метаданные (пустой массив)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"phone": "79000000000",
"fullname": "ДИМА",
"email": "d@yclients.com",
"code": "38829",
"comment": "тестовая запись!",
"type": "mobile",
"notify_by_sms": 6,
"notify_by_email": 24,
"api_id": "777",
"custom_fields": {
"my_client_custom_field": 789,
"some_another_client_field": []
},
"appointments": [
{},
{}
]
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": [ ]
}
Перенести запись на сеанс

put
/api/v1/book_record/{company_id}/{record_id}
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

record_id
required
number
ID записи которую необходимо перенести

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
datetime
string <date-time>
Дата и время на которое мы хотим перенести запись

comment
string
Комментарий к записи

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Данные (объект)

Request samples
Payload
Content type
application/json

Copy
{
"datetime": 1463754600,
"comment": "DODO!"
}
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 30358,
"services": [],
"company": {},
"staff": {},
"date": 1463754600,
"create_date": 1463668210,
"comment": "",
"deleted": true,
"length": 3600,
"notify_by_sms": 0,
"notify_by_email": 0,
"master_requested": false,
"online": true,
"api_id": "0"
}
}
Получить запись на сеанс

get
/api/v1/book_record/{company_id}/{record_id}/{record_hash}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

record_id
required
number
Example: 22123
ID записи (достаточно для просмотра записи если пользователь авторизован)

record_hash
required
string
Example: 'dawd4fs09rhf0s9fafef0'
HASH записи (обязательно для просмотра записи если пользователь не авторизован)

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
id
number
ID записи

services
Array of objects
Список ID услуг

company
object
Параметры компании

staff
object
Параметры сотрудника

clients_count
integer <int32>
date
string <date-time>
"2025-01-01 12:00:00" (required, string) - Дата сеанса

datetime
string <date-time>
Дата сеанса в ISO

create_date
string <date-time>
"2025-01-01 12:00:00" (required, string) - Дата создания записи

comment
string
Комментарий к записи

deleted
boolean
Удалена ли запись (true если удалена)

attendance
number
2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит

length
number
Длительность сеанса

notify_by_sms
number
За какое кол-во часов отправить смс напоминание о записи (0 если не нужно напоминать)

notify_by_email
number
За какое кол-во часов отправить email напоминание о записи (0 если не нужно напоминать)

master_requested
boolean
Был ли указан определенный специалист при записи (false если был указан "не имеет значения")

online
boolean
Запись онлайновая или нет (false если запись внес администратор)

api_id
string
Внешний идентификатор записи

last_change_date
string <date-time>
Дата последнего редактирования записи

prepaid
boolean
Доступна ли онлайн-оплата для записи

prepaid_confirmed
boolean
Статус online-оплаты

activity_id
number
ID групповой записи

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"id": 13132699,
"services": [
{}
],
"company": {
"id": 4564,
"title": "Салон корекции ногтей",
"country_id": 1,
"country": "Россия",
"city_id": 2,
"city": "Москва",
"phone": "+84 9 243 31 231",
"phones": [],
"timezone": 12,
"address": "ул. Образцова, 345",
"coordinate_lat": 54.786441,
"coordinate_lon": 37.608852,
"allow_delete_record": true,
"allow_change_record": true,
"site": "www.nogti.com",
"currency_short_title": "₽",
"allow_change_record_delay_step": 0,
"allow_delete_record_delay_step": 0
},
"staff": {
"id": 55436,
"name": "Наталья",
"specialization": "Мастер маникюра и педикюра",
"position": {},
"show_rating": 1,
"rating": 4.84,
"votes_count": 0,
"avatar": "http://example.com/image.png",
"comments_count": 37
},
"clients_count": 1,
"date": "2017-10-24 17:30:00",
"datetime": "2017-10-24T17:30:00+0000",
"create_date": "2017-10-20T21:40:24+0000",
"comment": "",
"deleted": true,
"attendance": 0,
"length": 1800,
"notify_by_sms": 0,
"notify_by_email": 0,
"master_requested": false,
"online": true,
"api_id": "",
"last_change_date": "2017-10-24T23:54:02+0000",
"prepaid": false,
"prepaid_confirmed": false,
"activity_id": 0
}
Создать запись в групповом событии

post
/api/v1/activity/{company_id}/{activity_id}/book
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

activity_id
required
number
ID группового события

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Request Body schema: */*
phone
required
string
Телефон клиента

fullname
required
string
Имя клиента

surname
string
Фамилия клиента

patronymic
string
Отчество клиента

email
string
Почтовый адрес клиента

code
number
Код подтверждения телефона, высланный по смс (обязателен если у компании выставлен phone_conformation = true)

comment
string
Коммаентарий к записи

notify_by_sms
number
За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)

notify_by_email
number
За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)

api_id
number
ID записи из внешней системы

is_newsletter_allowed
boolean
Отправка информационно-рекламной рассылки

is_personal_data_processing_allowed
boolean
Обработка персональных данных

appointments
Array of objects
Параметры записей (сеанс, услуги, мастер)

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 28417878,
"hash": "9e6a54a1a9b118b65cc39ab6f3c3b5b4"
},
"meta": [ ]
}
Получить список дат доступных для бронирования

get
/api/v1/book_dates/{company_id}
Объект даты, доступные для бронирования имеет следующие поля:

Поле	Тип	Описание
working_days	массив рабочих дней сгруппированных по месяцам	Рабочие дни сотрудника/организации
working_dates	array of dates	Массив дат, когда работает сотрудник/организация
booking_days	массив дней, когда есть свободные сеансы	Массив дней, которые доступны для бронирования на указанные услуги
booking_dates	array of dates	Массив дат, когда есть свободные сеансы на услугу к выбранному сотруднику/организации
working days и booking_days имеют одинаковый формат: месяц:[массив дней в этом месяце]

Например такой booking_days: "9": [ "4", "5"] "10": [ "14", "25"] Означает что на 4 и 5 сентября, и на 14 и 25 октября есть свободные сеансы для бронирования

Доступны следующие фильтры:

service_ids: Массив ID услуг. Если нужны даты, когда можно забронировать указанные услуги
staff_id: ID сотрудника. Если нужны даты, когда можно забронировать указанного специалиста
date: Дата в рамках месяца, если нужны даты по конкретному месяцу
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

query Parameters
service_ids
Array of numbers
ID услуг. Фильтр по списку идентификаторов услуг. Пример: service_ids[]=123&service_ids[]=234.

staff_id
number
Example: staff_id=0
ID сотрудника. Фильтр по идентификатору сотрудника Default: 0

date
string
Example: date=2015-09-01
дата в формате iso8601. Фильтр по месяцу бронирования.

date_from
string
Example: date_from=2015-09-01
дата в формате iso8601. Начало диапазона поиска. Используется в паре с параметром "date_to" и имеет приоритет перед параметром "date".

date_to
string
Example: date_to=2015-09-30
дата в формате iso8601. Окончание диапазона поиска. Используется в паре с параметром "date_from" и имеет приоритет перед параметром "date".

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Данные (объект)

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"booking_days": {},
"booking_dates": [],
"working_days": {},
"working_dates": []
},
"meta": [ ]
}
Получить список услуг доступных для бронирования

get
/api/v1/book_services/{company_id}
Объект услуг, доступных для бронирования имеет следующие поля:

Поле	Тип	Описание
categories	массив объектов	Массив категорий услуг (забронировать категорию нельзя)
services	массив объектов	Услуги, доступные для бронирования, с указанием категории
Объект из массива categories, имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор категории
title	string	Название категории
sex	number	Принадлежность категории к полу (1 - мужской, 2 - женский, 0 - не задано)
weight	number	Вес категории. При выводе категории сортируются по весу, сначала более тяжелые
api_id	string	Внешний идентификатор категории
Объект из массива services, имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор услуги
title	string	Название услуги
category_id	number	Идентификатор категории, которой принадлежит услуга
weight	number	Вес категории. При выводе услуги сортируются по весу, сначала более тяжелые
price_min	number	Минимальная стоимость услуги
price_max	number	Максимальная стоимость услуги
discount	number	Скидка по услуге
comment	string	Комментарий к услуге
active	number	Активная ли услуга
prepaid	string	Статус онлайн-оплаты
sex	number	Пол, для которого оказывается услуга
seance_length	number	Длительность оказания услуги в секундах (только если задан фильтр по сотруднику)
image	string	Изображение услуги
Если необходимо получить услуги, которые оказывает конкретный специалист, то нужно воспользоваться фильтром по специалисту. Доступны следующие фильтры:

staff_id: ID сотрудника. Если нужны услуги, которые оказывает только выбранный сотрудник
datetime: дата (в формате iso8601). Если нужны услуги, которые можно забронировать у мастера на определенное время
service_ids: Массив ID услуг. Если уже выбран мастер, время и услуга(и) в рамках этой записи, и необходимо выбрать еще услугу.
Authorizations:
bearer
path Parameters
company_id
required
number
Example: 4564
ID компании

query Parameters
staff_id
number
Example: staff_id=0
ID сотрудника. Фильтр по идентификатору сотрудника Default: 0

datetime
number
Example: datetime=``
дата (в формате iso8601). Фильтр по дате бронирования услуги (например '2005-09-09T18:30') Default: ''

service_ids
Array of numbers
ID услуг. Фильтр по списку идентификаторов услуг. Пример: service_ids[]=123&service_ids[]=234.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успшности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"events": [ ],
"services": [],
"category": []
},
"meta": [ ]
}
Получить список ближайших доступных сеансов

get
/api/v1/book_staff_seances/{company_id}/{staff_id}/
Объект ближайших сеансов сотрудника имеет следующие поля:

Поле	Тип	Описание
seance_date	string	Ближайшая дата с доступными сеансами
seances	Array	Список доступных сеансов
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

staff_id
required
number
ID сотрудника

query Parameters
service_ids
Array of numbers
ID услуг. Фильтр по списку идентификаторов услуг. Пример: service_ids[]=123&service_ids[]=234.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"seance_date": 1492041600,
"seances": []
},
"meta": [ ]
}
Получить список сотрудников доступных для бронирования

get
/api/v1/book_staff/{company_id}
Каждый объект из массива сотрудников, доступных для бронирования имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор сотрудника
name	string	Имя сотрудника
specialization	string	Специализация сотрудника
position	object	Должность сотрудника
bookable	boolean	Есть ли у сотрудника сеансы, доступные для бронирования
weight	number	Вес сотрудника. При выводе сотрудники сортируются по весу, сначала более тяжелые
show_rating	number	Показывать ли рейтинг сотрудника (1 - показывать, 0 - не показывать)
rating	number	Рейтинг сотрудника
votes_count	number	Кол-во голосов, оценивших сотрудника
comments_count	number	Кол-во комментариев к сотруднику
avatar	string	Путь к файлу аватарки сотрудника
information	string	Дополнительная информация о сотруднике (HTML формат)
seance_date	string	Дата ближайшего дня, на который есть доступные сеансы (только для bookable = true)
Доступны следующие фильтры:

service_ids: Массив ID услуг. Если нужны сотрудники, которые оказывают только выбранную услугу
datetime: дата (в формате iso8601). Если нужны сотрудники, у которых есть сеансы на указанную услугу в указанное время
Authorizations:
bearer
path Parameters
company_id
required
number
Example: 4564
ID компании

query Parameters
service_ids
Array of numbers
ID услуг. Фильтр по списку идентификаторов услуг. Пример: service_ids[]=123&service_ids[]=234.

datetime
number
дата в формате iso8601. Фильтр по дате бронирования услуги (например '2005-09-09T18:30')

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": [ ]
}
Получить список сеансов доступных для бронирования

get
/api/v1/book_times/{company_id}/{staff_id}/{date}
Объект сеансы, доступные для бронирования имеет следующие поля:

Поле	Тип	Описание
time	string	Время сеанса (17:30 например)
seance_length	number	Длительность сеанса в секундах
datetime	datetime	Дата и время сеанса в формате ISO8601 (нужно передавать при создании записи)
Доступны следующие фильтры:

service_ids: Массив ID услуг. Если нужны сеансы, когда можно забронировать указанные услуги
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

date
required
string
дата в формате YYYY-MM-DD. Фильтр по дате бронирования (например '2025-09-30')

staff_id
required
number
Example: 0
ID сотрудника. Фильтр по идентификатору сотрудника Default: 0

query Parameters
service_ids
Array of numbers
ID услуг. Фильтр по списку идентификаторов услуг. Пример: service_ids[]=123&service_ids[]=234.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{},
{},
{},
{}
],
"meta": [ ]
}
Получить настройки таймслотов филиала

get
/api/v1/company/{company_id}/settings/timeslots
Получение настроек таймслотов филиала. Интервалы слотов указываются в секундах, в ответе возвращаются настройки по каждому дню недели.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object
Объект модели "Настройки таймслотов".

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Response samples
200401403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"is_enabled": true,
"weekdays_settings": [],
"dates_settings": {}
},
"meta": { }
}
Записи пользователя
Для управлениями записями пользователя используются следующие методы

Получить записи пользователя

get
/api/v1/user/records/{record_id}/{record_hash}
JSON-Объект содержащий параметры записи пользователя имеет следующие поля:

Поле	Тип	Обязательный	Описание
id	number	ДА	ID записи
services	array of numbers	ДА	Список ID услуг записи
company	object	ДА	Параметры компании
staff	object	ДА	Параметры специалиста, которые был забронирован
clients_count	int	ДА	Количество клиентов
date	string	ДА	Дата сеанса
datetime	string	ДА	Дата сеанса в формате
create_date	string	ДА	Дата создания записи
length	number	ДА	Длительность сеанса
deleted	boolean	ДА	Удалена ли запись (true если удалена)
notify_by_sms	number	НЕТ	За какое кол-во часов отправить смс напоминание о записи (0 если не нужно напоминать)
notify_by_email	number	НЕТ	За какое кол-во часов отправить email напоминание о записи (0 если не нужно напоминать)
comment	string	ДА	Комментарий к записи
master_requested	boolean	ДА	Был ли указан определенный специалист при записи (false если был указан "не имеет значения")
online	boolean	ДА	Запись онлайновая или нет (false если запись внес администратор)
visit_attendance	number	ДА	2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит
api_id	string	НЕТ	Внешний идентификатор записи
last_change_date	string	НЕТ	Дата последнего редактирования записи
prepaid	boolean	НЕТ	Доступна ли онлайн-оплата для записи
prepaid_confirmed	boolean	НЕТ	Статус online-оплаты
last_change_date	string	НЕТ	Дата последнего редактирования записи
activity_id	int	НЕТ	ID чего групповой записи
Каждый объект из массива services имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор услуги
title	string	Название услуги
cost	float	Стоимость услуги
price_min	float	Минимальная цена услуги
price_max	float	Максимальная цена услуги
discount	float	Скидка
amount	int	Количество заказанных услуг
seance_length	int	Длительность оказания услуги в секундах (только если задан фильтр по сотруднику)
Объект company имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор компании
title	string	Название компании
country_id	number	Идентификатор страны, в которой расположена компания
country	string	Название старны компании
city_id	number	Идентификатор города, в котором расположена компания)
city	string	Название города компании
timezone	string	Timezone компании
address	string	Адрес, по которому расположена компания
phone	string	Основной номер телефона компании
phones	array of strings	Все номера телефонов компании
coordinate_lat	float	Широта, на которой расположена компания
coordinate_lng	float	Долгота
allow_delete_record	boolean	Можно ли удалять запись
allow_change_record	boolean	Можно ли переносить запись
site	string	Сайт компании
currency_short_title	string	Символ валюты
allow_change_record_delay_step	int	Время, через которое можно переносить запись
allow_delete_record_delay_step	int	Время, через которое можно удалять запись
Объект staff имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор сотрудника
name	string	Имя сотрудника
specialization	string	Специализация сотрудника
position	object	Должность сотрудника
show_rating	number	Показывать ли рейтинг сотрудника (1 - показывать, 0 - не показывать)
rating	number	Рейтинг сотрудника
votes_count	number	Кол-во голосов, оценивших сотрудника
comments_count	number	Кол-во комментариев к сотруднику
avatar	string	Путь к файлу аватарки сотрудника
Authorizations:
(beareruser)
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов

meta
Array of objects
Метаданные (пустой массив)

Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": [ ]
}
Удалить запись пользователя

delete
/api/v1/user/records/{record_id}/{record_hash}
Authorizations:
(beareruser)
path Parameters
record_id
required
number
Example: 22123
ID записи (достаточно для удаления записи если пользователь авторизован)

record_hash
required
string
Example: 'dawd4fs09rhf0s9fafef0'
HASH записи (обязательно для удаления записи если пользователь не авторизован)

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Пользователи онлайн-записи
Пользователи клиентской части онлайн-записи.

Отправить СМС код подтверждения номера телефона

post
/api/v1/book_code/{company_id}
Тело запроса
phone (required, string, '79991234567') - телефон, на который будет отправлен код
fullname (option, sring, Вася) - Имя клиента
Authorizations:
bearer
path Parameters
company_id
required
number
Example: 4564
ID компании

header Parameters
Accept
required
string
application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
phone
required
string
Номер телефона клиента

fulname
string
Имя клиента

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

meta
object
Метаданные

Request samples
Payload
Content type
application/json

Copy
{
"phone": "79991234567",
"fulname": "Вася"
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"meta": {
"message": "Created"
}
}
Авторизоваться по номеру телефона и коду

post
/api/v1/user/auth
Для авторизации по коду, сначала необходимо запросить код подтверждения. Это можно сделать методом Отправить СМС код подтверждения номера телефона

Authorizations:
bearer
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
phone
required
string
Номер телефона

code
required
string
Код подтверждения

Responses
201 Created
Response Schema: application/json
id
integer <int32>
Идентификатор пользователя

user_token
string
User_token пользователя

name
string
Имя пользователя

phone
string
Телефон пользователя

login
string
Логин пользователя

email
string
Почтовый адрес пользователя

avatar
string
Путь к файлу аватарки пользователя

Request samples
Payload
Content type
application/json

Copy
{
"phone": "71111111111",
"code": "1234"
}
Response samples
201
Content type
application/json

Copy
{
"id": 123456,
"user_token": "wec23fh8cDfFV4432fc352456",
"name": "Иван Попов",
"phone": "79161001010",
"login": "79161001010",
"email": "test@test.com",
"avatar": "https://assets.yclients.com/general/0/01/123456789098765_12345678909876.png"
}
Авторизовать пользователя онлайн-записи

post
/api/v1/booking/auth
При смене пароля пользователем онлайн-записи его API-ключ изменится и потребуется новая авторизация

Authorizations:
bearer
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Request Body schema: application/json
login
required
string
Номер телефона или Email

password
required
string
Пароль

Responses
201 Created
Response Schema: application/json
id
integer <int32>
Идентификатор пользователя

user_token
string
User_token пользователя

name
string
Имя пользователя

phone
string
Телефон пользователя

login
string
Логин пользователя

email
string
Почтовый адрес пользователя

avatar
string
Путь к файлу аватарки пользователя

Request samples
Payload
Content type
application/json

Copy
{
"login": "testuser@yclients.com",
"password": "testpass"
}
Response samples
201
Content type
application/json

Copy
{
"id": 123456,
"user_token": "wec23fh8cDfFV4432fc352456",
"name": "Иван Попов",
"phone": "79161001010",
"login": "79161001010",
"email": "test@test.com",
"avatar": "https://assets.yclients.com/general/0/01/123456789098765_12345678909876.png"
}
Отправить СМС код подтверждения номера телефона для изменения данных

get
/api/v1/booking/user/phone_confirmation
В запросе должен обязательно присутствовать один из двух параметров: company_id или group_id

Authorizations:
(beareruser)
query Parameters
company_id
required
integer
Идентификатор компании

group_id
required
integer
Идентификатор сети

phone
required
string
Номер телефона

header Parameters
Accept
required
string
application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
202 Accepted
Response samples
202
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"meta": {
"message": "Accepted"
}
}
Обновление пароля пользователя онлайн-записи

put
/api/v1/booking/user/password
Обновление пароля пользователя онлайн-записи.

В ответе приходит новый токен пользователя.

Authorizations:
(beareruser)
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
old_password
string
Текущий пароль

new_password
string
Новый пароль

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Request samples
Payload
Content type
application/json

Copy
{
"old_password": "qwerty123",
"new_password": "example!"
}
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"user_token": "4de9d8cc108c0"
},
"meta": [ ]
}
Обновление данных пользователя онлайн-записи

put
/api/v1/booking/user
Обновление основных данных пользователя онлайн-записи.

При обновлении номера телефона нужно отправлять поле confirmation_code с кодом, который нужно получить из ресурса СМС код подтверждения номера телефона для изменения данных

Authorizations:
(beareruser)
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
name
string
Имя

email
string
Почта

phone
string
Номер телефона

confirmation_code
string
Код подтверждения из смс (при смене номера телефона)

Responses
202 Accepted
Request samples
Payload
Content type
application/json

Copy
{
"name": "Вася",
"email": "test@test.com",
"phone": "79999999999",
"confirmation_code": "1234"
}
Response samples
202
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"meta": {
"message": "Accepted"
}
}
Получение данных пользователя онлайн-записи

get
/api/v1/booking/user/data
Получение данных пользователя онлайн-записи.

Authorizations:
(beareruser)
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
0
string
Токен пользователя

id
integer <int32>
Идентификатор пользователя

user_token
string
Токен пользователя

name
string
Имя пользователя

phone
string
Телефон пользователя

login
string
Логин пользователя

email
string
Почта пользователя

avatar
string
Аватар пользователя

Response samples
200
Content type
application/json

Copy
{
"0": "152afb01134237bc844d7e",
"id": 32132133,
"user_token": "152afb01134237bc844d7e",
"name": "Вася",
"phone": "79999999999",
"login": "79999999999",
"email": "vasily@example.com",
"avatar": "https://api.yclients.com/images/avatar.png"
}
Компании
Для работы с компаниями используются следующие методы

Коллекция компаний
Объект компании имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор компании
title	string	Название компании (Обязательное поле для создания компании)
logo	string	Адрес изображения логотипа компании
short_descr	string	Категория компании
country_id	number	Идентификатор страны, в которой расположена компания
country	string	Название старны компании
city_id	number	Идентификатор города, в котором расположена компания)
city	string	Название города компании
timezone	string	Timezone компании
schedule	string	Расписание работы компании
address	string	Адрес, по которому расположена компания
phone	string	Номер телефона компании
coordinate_lat	float	Широта, на которой расположена компания
coordinate_lon	float	Долгота
app_ios	string	Ссылка на приложение под ios
app_android	string	Ссылка на приложение под android
phone_confirmation	boolean	Нужно ли подтверждать телефон по смс
active_staff_count	number	Кол-во сотрудников доступных для бронирования
next_slot	datetime	Дата и время ближайшего свободного сеанса в компании(ISO8601). Поле будет присутствовать только если передан GET параметр forBooking=1
booking_comment_required	boolean	Является ли поле с комментарием к записи обязательным для заполнения
booking_email_required	boolean	Является ли поле Email к записи обязательным для заполнения
booking_comment_input_name	string (optional)	Заголовок для поля с вводом комментария к записи (если не задано, то используется значение по умолчанию)
booking_notify_text	string (optional)	Текст уведомления, которое выводится (если задано) на шаге ввода контактных данных
reminds_sms_disabled	boolean	True - если у компании выключен сервис SMS напоминаний клиентам.
group_priority	number	Чем больше приоритет, тем выше компания при выводе в списке филиалов сети
allow_change_record	boolean	Изменение записи
allow_change_record_delay_step	number	Запретить изменять записи за период. (В секундах)
allow_delete_record	boolean	Удаление записи
allow_delete_record_delay_step	number	Запретить удалять записи за период. (В секундах)
Получить список компаний

get
/api/v1/companies
Получить список с данными о компаниях

Authorizations:
bearer
query Parameters
id
number
Example: id=4564
ID компании. Фильтр по идентификатору компании

group_id
number
Example: group_id=83
ID сети компаний. Фильтр по идентификатору сети компаний Default: 83

my
number
Example: my=1
Только для авторизованного пользователя. Если нужно компании, на управление которыми пользователь имеет права

active
number
Example: active=1
Если нужно получить только компании с активной лицензией и доступным бронированием

moderated
number
Example: moderated=1
Если нужно получить только прошедшие модерацию компании, чей контент проверен для публикации

forBooking
number
Example: forBooking=1
Показать дату и время ближайшего свободного сеанса в компании (ISO8601)

show_groups
number
Example: show_groups=1
Включить в объект компании список сетей в которые входит эта компания

city_id
number
Example: city_id=2
Поиск по ID города (метод получения городов)

showBookforms
number
Example: showBookforms=1
Включить в объект компании виджеты онлайн-записи

vk_api_id
number
Example: vk_api_id=2
Поиск виджеты онлайн-записи по vk_api_id. Параметр работает при showBookforms=1

min_id
number
Example: min_id=1000
Минимальный ID компании

show_deleted
number
Example: show_deleted=1
Включить в список удалённые компании

hide_record_type_single
number
Example: hide_record_type_single=1
Не показывать салоны с индивидуальной записью

hide_record_type_activity
number
Example: hide_record_type_activity=1
Не показывать салоны с групповой записью

hide_record_type_mixed
number
Example: hide_record_type_mixed=1
Не показывать салоны со смешанной записью

business_group_id
number
Example: business_group_id=1
Идентификатор группы бизнеса. Фильтр по группе бизнеса

business_type_id
number
Example: business_type_id=1
Идентификатор сферы бизнеса. Фильтр по сфере бизнеса

yandex
number
Example: yandex=1
Фильтр по синхронизации данных компании с партнерскими площадкам

include
Array of strings
Items Enum: "staff" "positions" "accounts" "storages" "expenses"
Example: include=staff&include=positions
Включить в объект компании дополнительные данные

count
number
Количество компаний на странице

page
number
Номер страницы

header Parameters
Accept
required
string
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Должен быть равен application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешного выполнения (true)

data
Array of objects
Массив объектов

meta
Array of objects
Метаданные (пустой массив)

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

Response samples
200401
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": { }
}
Создать компанию

post
/api/v1/companies
Создать новую компанию.

Authorizations:
(beareruser)
header Parameters
Accept
required
string
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Должен быть равен application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
title
string
Название компании

country_id
number
Идентификатор страны, в которой расположена копания (метод получения стран)

city_id
number
Идентификатор города, в котором расположена компания (метод получения городов)

address
string
Адрес компании

site
string
Сайт компании

coordinate_lat
number <float>
Широта

coordinate_lot
number <float>
Долгота

business_type_id
number
Сфера бизнеса

short_descr
string
Категория компании

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешного выполнения (true)

data
object
Объект данных

meta
Array of objects
Метаданные (пустой массив)

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
{
"title": "Новая компания",
"country_id": 1,
"city_id": 2,
"address": "Талалихина, д. 1, к. 2",
"site": "new-company.ru",
"coordinate_lat": "55.835662",
"coordinate_lot": "37.778218",
"business_type_id": 1,
"short_descr": "Салон красоты"
}
Response samples
201401404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": "1050",
"title": "Новая компания",
"short_descr": "Салон красоты",
"logo": "https://yclients.com/images/no-master.png",
"active": "1",
"phone": "",
"country_id": 1,
"schedule": "",
"country": "Россия",
"city_id": 2,
"city": "Москва",
"timezone_name": "Europe/Moscow",
"address": "Талалихина, д. 1, к. 2",
"coordinate_lat": "55.735662",
"coordinate_lon": "37.678218",
"phone_confirmation": true,
"active_staff_count": 2,
"app_ios": "",
"app_android": "",
"currency_short_title": "р"
},
"meta": { }
}
Получить компанию

get
/api/v1/company/{id}/
Получение данных о компании.

Authorizations:
(beareruser)
path Parameters
id
required
number
Example: 37532
Идентификатор компании, информацию о которой нужно получить.

query Parameters
my
number
Example: my=1
Только для авторизованного пользователя. Если нужны дополнительные данные по компании, на управление которой пользователь имеет права

forBooking
number
Example: forBooking=1
Показать дату и время ближайшего свободного сеанса в компании (ISO8601).

show_groups
number
Example: show_groups=1
Включить в объект компании список сетей в которые входит эта компания

showBookforms
number
Example: showBookforms=1
Показать виджеты онлайн-записи компании

bookform_id
number
Example: bookform_id=19203
Показать адрес виджета онлайн-записи с указанным идентификатором

header Parameters
Accept
required
string
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Должен быть равен application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешного выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

401 Unauthorized
Response Schema: application/json
errors
object (Сообщение об ошибке запроса)
Дополнительная информация об ошибках.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
errors
object (Сообщение об ошибке запроса)
Дополнительная информация об ошибках.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

Response samples
200401404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 37532,
"title": "Новая компания",
"country_id": 1,
"country": "Россия",
"city_id": 1,
"city": "Москва",
"timezone_name": "Europe/Moscow",
"address": "Большой Саввинский пер., д. 3",
"zip": 119435,
"coordinate_lat": 55.735662,
"coordinate_lon": 37.678218,
"short_descr": "Салон красоты",
"social": {},
"site": "new-company.ru",
"business_type_id": 1,
"description": "Самая <strong>Новая компания</strong> на рынке",
"phone_confirmation": true,
"active_staff_count": 3,
"next_slot": "2023-03-23T10:10:00+0300",
"group_priority": 900,
"push_notification_phone_confirm": 1,
"main_group_id": 9206,
"main_group": {},
"groups": {},
"bookforms": [],
"online_sales_form_url": "https://o1.yclients.com",
"access": { }
},
"meta": { }
}
Изменить компанию

put
/api/v1/company/{id}/
Изменение данных о компании.

Authorizations:
(beareruser)
path Parameters
id
required
number
Example: 37532
Идентификатор компании

header Parameters
Accept
required
string
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Должен быть равен application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
title
string
Название компании

country_id
number
Идентификатор страны (приоритетнее параметра country)

country
string
Страна

city_id
number
Идентификатор города (приоритетнее параметра city)

city
string
Город

address
string
Адрес компании

zip
string
Индекс

phones
Array of strings
Телефоны

social
object
Социальные сети компании

site
string
Сайт компании

coordinate_lat
number <float>
Широта

coordinate_lon
number <float>
Долгота

description
string <html>
Описание

business_type_id
number <int32>
Сфера бизнеса

short_descr
string
Категория бизнеса

Responses
200 OK
Response Schema: application/json
id
number
Идентификатор компании

title
string
Название компании

country_id
number
Идентификатор страны, в которой расположена компания

country
string
Название страны, в которой расположена компания

city_id
number
Идентификатор города, в котором расположена компания

city
string
Название города, в котором расположена компания

timezone_name
string
Наименование временной зоны, в которой расположена компания

address
string
Адрес, по которому расположена компания

zip
number
Индекс

social
object
Социальные сети компании

site
string
Сайт компании

coordinate_lat
number <float>
Широта

coordinate_lon
number <float>
Долгота

description
string <html>
Описание

business_type_id
number <int32>
Сфера бизнеса

short_descr
string
Категория бизнеса

phone_confirmation
boolean
Нужно ли подтверждать телефон по смс, при бронировании

group_priority
integer <int32>
Чем больше приоритет, тем выше компания при выводе в списке филиалов сети

push_notification_phone_confirm
boolean
Подтверждать номер клиента для отправки push уведомлений

access
object
Список прав

401 Unauthorized
Response Schema: application/json
errors
object (Сообщение об ошибке запроса)
Дополнительная информация об ошибках.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
errors
object (Сообщение об ошибке запроса)
Дополнительная информация об ошибках.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"title": "Новая компания",
"country": "Россия",
"city": "Москва",
"address": "Большой Саввинский пер., д. 4",
"zip": "119435",
"phones": [
"79876543210",
"79876543211"
],
"social": {
"vk": "vk.com/newcompany"
},
"site": "new-company.ru",
"coordinate_lat": 55.735662,
"coordinate_lon": 37.678218,
"description": "Самая <strong>Новая компания</strong> на рынке",
"business_type_id": 1,
"short_descr": "Салон красоты"
}
Response samples
200401404
Content type
application/json

Copy
Expand allCollapse all
{
"id": 37532,
"title": "Новая компания",
"country_id": 1,
"country": "Россия",
"city_id": 2,
"city": "Москва",
"timezone_name": "Europe/Moscow",
"address": "Большой Саввинский пер., д. 3",
"zip": 119435,
"coordinate_lat": 55.735662,
"coordinate_lon": 37.678218,
"short_descr": "Салон красоты",
"social": {
"facebook": "",
"vk": "vk.com/newcompany",
"instagram": "",
"telegram": "",
"whatsapp": "",
"viber": ""
},
"site": "new-company.ru",
"business_type_id": 1,
"description": "Самая <strong>Новая компания</strong> на рынке",
"phone_confirmation": true,
"group_priority": 900,
"push_notification_phone_confirm": 1,
"access": { }
}
Удалить компанию

delete
/api/v1/company/{id}/
Удаление компании.

Authorizations:
(beareruser)
path Parameters
id
required
number
Example: 37532
Идентификатор компании

header Parameters
Accept
required
string
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Должен быть равен application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
202 Accepted
401 Unauthorized
Response Schema: application/json
errors
object (Сообщение об ошибке запроса)
Дополнительная информация об ошибках.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
errors
object (Сообщение об ошибке запроса)
Дополнительная информация об ошибках.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

Response samples
401404
Content type
application/json

Copy
Expand allCollapse all
{
"errors": {
"code": 401,
"message": "Необходима авторизация"
},
"meta": {
"message": "Необходима авторизация"
}
}
Категория услуг
Для работы с категориями услуг используются следующие методы

Объект категории услуг имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор категории
title	string	Название категории
api_id	Integer	Внешний идентификатор категории
weight	number	Вес категории (используется для сортировки категорий при отображении)
staff	array	Список ID сотрудников, оказывающих услугу
Фильтрация категорий услуг
staff_id: ID сотрудника. Если нужны услуги, которые оказывает конкретный мастер
Создать категорию услугу

post
/api/v1/service_categories/{company_id}
Authorizations:
(beareruser)
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
title
string
Название категории услуг

api_id
string
Внешний идентификатор категории

weight
number
Вес категории (используется для сортировки категорий при отображении)

staff
Array of numbers
Список ID сотрудников, оказывающих услуги из категории

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"title": "Стрижка очень женская",
"api_id": "adw322",
"weight": 111,
"staff": [
5006,
8901
]
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 3,
"title": "Стрижка очень женская",
"api_id": "adw322",
"weight": 111,
"staff": []
},
"meta": [ ]
}
Получить категорию услуг

get
/api/v1/service_category/{company_id}/{id}
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

id
required
number
ID категории услуг

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов

meta
object
Метаданные (количество категорий)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 3,
"salon_service_id": 15,
"title": "Стрижки женские",
"weight": 12,
"staff": []
},
"meta": [ ]
}
Изменить категорию услуг

put
/api/v1/service_category/{company_id}/{id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

id
required
number
ID категории услуги

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
title
string
Название категории услуг

api_id
string
Внешний идентификатор категории

weight
number
Вес категории (используется для сортировки категорий при отображении)

staff
Array of numbers
Список ID сотрудников, оказывающих услуги из категории

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов

meta
object
Метаданные (количество категорий)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"title": "Стрижка очень женская",
"api_id": "adw322",
"weight": 111,
"staff": [
5006,
8901
]
}
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 3,
"salon_service_id": 15,
"title": "Стрижки женские",
"weight": 15,
"staff": []
},
"meta": [ ]
}
Удалить категорию услуг

delete
/api/v1/service_category/{company_id}/{id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

id
required
number
ID категории услуги

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Conetnt-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
204 No Content
Получить список категорий услуг сети

get
/api/v1/chain/{chain_id}/service_categories
Authorizations:
(beareruser)
path Parameters
chain_id
required
integer
Идентификатор сети

query Parameters
include
string
Value: "services"
Включить в ответ дополительные ресурсы

header Parameters
Accept
required
string
application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
Array
id
integer <int32>
Идентификатор категории услуг

title
string
Название категории услуг

services
Array of objects (Root Type for ServiceTitle)
Услуги в категории (по запросу)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
[
{
"id": 41,
"title": "Категория услуг",
"services": []
}
]
Получить список категорий услуг

get
/api/v1/company/{company_id}/service_categories/{id}
Параметры
company_id (required, number) - ID компании
id (optional, number) - ID категории услуг (для работы с конкретной категорией)
staff_id (optional, number) - ID сотрудника (для получения категорий, привязанных к сотруднику)
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

id
required
number
ID категории услуг

query Parameters
staff_id
number
ID сотрудника (для получения категорий, привязанных к сотруднику)

header Parameters
Accept
required
string
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов

meta
object
Метаданные (количество категорий)

403 Forbidden
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
string
имеет значение null

meta
object
Метаданные (сообщение об ошибке)

404 Not Found
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
string
имеет значение null

meta
object
Метаданные (содержит возможные сообщения об ошибке)

Response samples
200403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": {
"total_count": 2
}
}
Устаревшее. Получить список категорий услуг Deprecated

get
/api/v1/service_categories/{company_id}/{id}
Получить список категорий услуг

Authorizations:
bearer
path Parameters
company_id
required
number
Идентификатор компании

id
required
number
Идентификатор категории услуги

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов

meta
object
Метаданные (количество категорий)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": [ ]
}
Услуги
Для работы с услугами используются следующие методы

Объект услуги имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор услуги
category_id	number	Идентификатор категории, в которой состоит услуга
title	string	Название категории
price_min	number	Минимальная цена на услугу
price_max	number	Максимальная цена на услугу
duration	number	Длительность услуги, по умолчанию равна 3600 секундам
service_type	number	1 - доступна для онлайн записи, 0 - не доступна
comment	string	комментарий у услуге
api_service_id	Integer	Внешний идентификатор услуги
weight	number	Вес категории (используется для сортировки категорий при отображении)
staff	array	Список сотрудников, оказывающих услугу и длительность сеанса
image_group	object	Группа изображений услуги
Массив со списком сотрудников, оказывающих услугу состоит из объектов со следующими полями

Поле	Тип	Описание
id	number	Идентификатор сотрудника
seance_length	number	Длительность оказания услуги мастером. (В секундах)
Фильтрация услуг
staff_id: ID сотрудника. Если нужны услуги, которые оказывает конкретный мастер

category_id: ID категории. Если нужны услуги, из конкретной категории

Создать услугу

post
/api/v1/services/{company_id}
Метод, позволяющий создать услугу

Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorizarion
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
title
string
Название услуги

category_id
number
ID категории услуг

price_min
number <float>
Минимальная стоимость услуги

price_max
number <float>
Максимальная стоимость услуги

duration
number
Длительность услуги, по умолчанию равна 3600 секундам

technical_break_duration
number or null [ 0 .. 3600 ]
Длительность технического перерыва

Если не передан. Значение по умолчанию null
Значение null, соответствует общей настройке филиала, и задается в разделе Настройки → Журнал записи → Технические перерывы
Параметр принимает только значения, кратные 300 (5-минутные интервалы)
Максимальное допустимое значение 3600 (1 час)
discount
number <float>
Скидка при оказании услуги

comment
string
Комментарий к услуге

weight
number
Вес услуги (используется для сортировки услуг при отображении)

service_type
number
Доступна ли для онлайн записи услуга. 1 - доступна, 0 не доступна.

api_service_id
string
Внешний идентификатор услуги

staff
Array of objects
Сотрудники, оказываюшие услугу и длительность оказания услуги каждым из них

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"title": "Мужская стрижка",
"category_id": 83167,
"price_min": 1300,
"price_max": 1300,
"duration": 3600,
"discount": 0,
"comment": "",
"weight": 6,
"active": 1,
"api_id": "00000000042",
"staff": [
{},
{},
{},
{},
{},
{},
{}
]
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 83169,
"title": "Мужская стрижка",
"category_id": 83167,
"price_min": 1300,
"price_max": 1300,
"discount": 0,
"duration": 3600,
"comment": "",
"weight": 6,
"active": 1,
"api_id": "00000000042",
"staff": []
},
"meta": [ ]
}
Получить список услуг / конкретную услугу

get
/api/v1/company/{company_id}/services/{service_id}
Параметр
company_id (required, number, 1) - ID компании
service_id (optional, number, 1) - ID услуги
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

service_id
required
number
ID услуги, если нужно работать с конкретной услугой.

query Parameters
staff_id
number
ID сотрудника, если нужно отфильтровать по сотруднику

category_id
number
ID категории, если нужно отфильтровать по категории

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержит количество найденных услуг)

403 Forbidden
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
string
имеет значение null

meta
object
Метаданные (сообщение об ошибке)

404 Not Found
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
string
имеет значение null

meta
object
Метаданные (содержит возможные сообщения об ошибке)

Response samples
200403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": {
"total_count": 2
}
}
Изменить услугу

patch
/api/v1/company/{company_id}/services/{service_id}
Метод, позволяющий изменить услугу

Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

service_id
required
number
ID услуги

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
title
required
string
Название услуги

booking_title
required
string
Название услуги для онлайн-записи

category_id
required
number
ID категории услуг

price_min
required
number <float>
Минимальная стоимость услуги

price_max
required
number <float>
Максимальная стоимость услуги

duration
required
number
Длительность услуги, по умолчанию равна 3600 секундам

technical_break_duration
number or null [ 0 .. 3600 ]
Длительность технического перерыва

Если не передан. Значение по умолчанию null
Значение null, соответствует общей настройке филиала, и задается в разделе Настройки → Журнал записи → Технические перерывы
Параметр принимает только значения, кратные 300 (5-минутные интервалы)
Максимальное допустимое значение 3600 (1 час)
discount
number <float>
Скидка при оказании услуги

comment
string
Комментарий к услуге

is_multi
required
boolean
false - индивидуальная услуга, true - групповая услуга

tax_variant
required
number
ID системы налогообложения

vat_id
required
number
ID НДС

is_need_limit_date
required
boolean
Ограничение по датам для онлайн-записи

date_from
string
Дата с которой услуга будет доступна в формате yyyy-mm-dd

date_to
string
Дата до которой услуга будет доступна в формате yyyy-mm-dd

dates
array of strings
Список дат в которые будет доступна онлайн запись (если массив не передан, все даты за указанный период будут доступны)

seance_search_start
required
number
Начало периода в какое время доступна запись, указывается в секундах

seance_search_finish
required
number
Конец периода в какое время доступна запись, указывается в секундах

step
required
number
Шаг вывода сеансов, указывается в секундах

seance_search_step
required
number
Шаг поиска сеансов, указывается в секундах

weight
number
Вес услуги (используется для сортировки услуг при отображении)

service_type
number
Доступна ли для онлайн записи услуга. 1 - доступна, 0 не доступна.

api_service_id
integer
Внешний идентификатор услуги

online_invoicing_status
integer
Онлайн-предоплата включена (0-выключена, 2-включена)

price_prepaid_percent
integer
Размер предоплаты в процентах (от минимальной стоимости услуги)

price_prepaid_amount
integer
Сумма предоплаты

abonement_restriction_value
integer
Запрет записи без абонемента (Только если online_invoicing_status=0)

is_abonement_autopayment_enabled
integer
Автосписание с абонемента

autopayment_before_visit_time
integer
За какое время до визита производится автосписание

staff
Array of objects
Сотрудники, оказываюшие услугу и длительность оказания услуги каждым из них

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
meta
Array of objects
Метаданные (пустой массив)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"title": "Мужская стрижка",
"booking_title": "Мужская стрижка",
"category_id": 83167,
"price_min": 1300,
"price_max": 1300,
"duration": 3600,
"discount": 0,
"tax_variant": 1,
"vat_id": 3,
"is_multi": false,
"is_need_limit_date": true,
"api_service_id": 1234,
"date_from": "2022-09-19",
"date_to": "2022-09-30",
"seance_search_start": 36000,
"seance_search_finish": 84600,
"step": 300,
"seance_search_step": 900,
"comment": "",
"weight": 6,
"service_type": 1,
"staff": [
{},
{},
{},
{},
{},
{},
{}
]
}
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"booking_title": "Мужская стрижка",
"tax_variant": 0,
"vat_id": 2,
"print_title": "Мужская стрижка",
"service_type": 1,
"api_service_id": 1234,
"repeat_visit_days_step": "null",
"seance_search_start": 1800,
"seance_search_finish": 84600,
"seance_search_step": 900,
"step": 300,
"is_need_limit_date": "true",
"date_from": "2022-09-19",
"date_to": "2022-09-30",
"schedule_template_type": 2,
"online_invoicing_status": 0,
"is_abonement_autopayment_enabled": 0,
"autopayment_before_visit_time": 0,
"abonement_restriction_value": 0,
"is_chain": "false",
"is_price_managed_only_in_chain": "false",
"is_comment_managed_only_in_chain": "false",
"price_prepaid_amount": 0,
"price_prepaid_percent": 100,
"id": 10832934,
"salon_service_id": 12192004,
"title": "Мужская стрижка",
"category_id": 10832928,
"price_min": 250,
"price_max": 1200,
"discount": 0,
"comment": "",
"weight": 0,
"active": 1,
"api_id": "1234",
"prepaid": "forbidden",
"is_multi": "false",
"capacity": 0,
"image_group": [ ],
"staff": [],
"dates": [],
"duration": 3600,
"resources": [ ],
"is_online": true
},
"meta": [ ]
}
Устаревшее. Получить список услуг / конкретную услугу Deprecated

get
/api/v1/services/{company_id}/{service_id}
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

service_id
required
number
ID услуги, если нужно работать с конкретной услугой.

query Parameters
staff_id
number
ID сотрудника, если нужно отфильтровать по сотруднику

category_id
number
ID категории, если нужно отфильтровать по категории

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержит количество найденных услуг)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": [ ]
}
Устаревшее. Изменить услугу Deprecated

put
/api/v1/services/{company_id}/{service_id}
Устаревшее. Метод, позволяющий изменить услугу

Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

service_id
required
number
ID услуги

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
title
string
Название услуги

category_id
number
ID категории услуг

price_min
number <float>
Минимальная стоимость услуги

price_max
number <float>
Максимальная стоимость услуги

duration
number
Длительность услуги, по умолчанию равна 3600 секундам

discount
number <float>
Скидка при оказании услуги

comment
string
Комментарий к услуге

weight
number
Вес услуги (используется для сортировки услуг при отображении)

service_type
number
Доступна ли для онлайн записи услуга. 1 - доступна, 0 не доступна.

api_service_id
string
Внешний идентификатор услуги

staff
Array of objects
Сотрудники, оказываюшие услугу и длительность оказания услуги каждым из них

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"title": "Мужская стрижка",
"category_id": 83167,
"price_min": 1300,
"price_max": 1300,
"duration": 3600,
"discount": 0,
"comment": "",
"weight": 6,
"active": 1,
"api_id": "00000000042",
"staff": [
{},
{},
{},
{},
{},
{},
{}
]
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 83169,
"title": "Мужская стрижка",
"category_id": 83167,
"price_min": 1300,
"price_max": 1300,
"duration": 3600,
"discount": 0,
"comment": "",
"weight": 6,
"active": 1,
"api_id": "00000000042",
"staff": []
},
"meta": [ ]
}
Удалить услугу

delete
/api/v1/services/{company_id}/{service_id}
Метод, позволяющий удалить услугу

Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

service_id
required
number
ID услуги

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
204 No Content
Изменить длительность оказания услуги сотрудниками, технические карты, названия на других языках

post
/api/v1/company/{company_id}/services/links
Метод, позволяющий изменить длительность оказания услуги сотрудниками, технические карты, названия на других языках

path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
service_id
required
number
ID услуги

master_settings
required
Array of objects
Список сотрудников, оказывающих услугу c длительностью сеанса и технологическими картами

resource_ids
required
Array of numbers
Список ресурсов необходимых для оказания услуги

translations
required
Array of objects
Список переводов для каждого языка

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"service_id": 10832939,
"master_settings": [
{},
{}
],
"resource_ids": [
62173
],
"translations": [
{},
{}
]
}
Привязка сотрудника, оказывающего услугу

post
/api/v1/company/{company_id}/services/{service_id}/staff
Создает привязку сотрудника к услуге с указанием длительности и технологической карты.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

service_id
required
number
Example: 123
Идентификатор услуги.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
master_id
required
number
Идентификатор сотрудника, оказывающего услугу.

seance_length
required
number
Длительность оказания услуги указанным сотрудником в секундах,
минимально 300 секунд (5 минут), максимально 86100 секунд (23 часа 55 минут).

technological_card_id
required
number or null
Идентификатор технологической карты, используемой при оказании услуги указанным сотрудником.

Responses
201 Created
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "Сотрудник, оказывающий услугу")
meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
{
"master_id": 123,
"seance_length": 3600,
"technological_card_id": 123
}
Response samples
201401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"service_id": 123,
"master_id": 123,
"length": 3600,
"technological_card_id": 123
},
"meta": { }
}
Изменение настроек оказания услуги сотрудником

put
/api/v1/company/{company_id}/services/{service_id}/staff/{master_id}
Обновляет данные привязки сотрудника к услуге с указанием длительности и технологической карты.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

service_id
required
number
Example: 123
Идентификатор услуги.

master_id
required
number
Example: 123
Идентификатор сотрудника.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
seance_length
required
number
Длительность оказания услуги указанным сотрудником в секундах,
минимально 300 секунд (5 минут), максимально 86100 секунд (23 часа 55 минут).

technological_card_id
required
number or null
Идентификатор технологической карты, используемой при оказании услуги указанным сотрудником.

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "Сотрудник, оказывающий услугу")
meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
{
"seance_length": 3600,
"technological_card_id": 123
}
Response samples
200401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"service_id": 123,
"master_id": 123,
"length": 3600,
"technological_card_id": 123
},
"meta": { }
}
Отвязка сотрудника, оказывающего услугу

delete
/api/v1/company/{company_id}/services/{service_id}/staff/{master_id}
Удаляет привязку сотрудника к услуге.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

service_id
required
number
Example: 123
Идентификатор услуги.

master_id
required
number
Example: 123
Идентификатор сотрудника.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Responses
204 No Content
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Response samples
204401403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": null,
"meta": { }
}
Пользователи
Управление пользователями, в частности работа с ролями и правами.

Получение списка ролей пользователей

get
/api/v1/company/{company_id}/users/roles
Возвращает список ролей пользователей вместе с правами для каждой роли.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

query Parameters
include
Array of strings
Items Value: "user_permissions"
Набор сущностей, которые должны быть включены в ответ.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
Array of objects (Объект модели "Роль пользователя")
meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Response samples
200401403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{}
],
"meta": { }
}
Получение списка ролей в контексте существующего пользователя

get
/api/v1/company/{company_id}/users/{user_id}/roles
Возвращает список ролей пользователей вместе с правами для каждой роли. Позволяет увидеть возможность изменить конкретные права (поле is_editable) у существующего пользователя филиала в зависимости от набора прав пользователя, от имени которого выполняется запрос.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

user_id
required
number
Example: 123
Идентификатор пользователя.

query Parameters
include
Array of strings
Items Value: "user_permissions"
Набор сущностей, которые должны быть включены в ответ.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
Array of objects (Объект модели "Роль пользователя")
meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Response samples
200401403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{}
],
"meta": { }
}
Получение значений прав и роли пользователя

get
/api/v1/company/{company_id}/users/{user_id}/permissions
Возвращает роль пользователя и список прав со значениями.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

user_id
required
number
Example: 123
Идентификатор пользователя.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "Права и роль пользователя")
Данные по правам и роли пользователя

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Response samples
200401403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"is_editable": true,
"staff_id": 12345,
"user_role": "owner",
"user_permissions": []
},
"meta": { }
}
Обновление прав и роли пользователя

put
/api/v1/company/{company_id}/users/{user_id}/permissions
Обновляет роль и права пользователя, а так же сотрудника который к этому пользователю прикреплен.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

user_id
required
number
Example: 123
Идентификатор пользователя.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
user_role
string
Enum: "worker" "administrator" "accountant" "manager" "owner"
Название роли

user_permissions
Array of items
Список значений прав пользователя

staff_id
number
Идентификатор сотрудника привязанного к пользователю

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "Права и роль пользователя")
Данные по правам и роли пользователя

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"user_role": "worker",
"user_permissions": [
{}
],
"staff_id": 0
}
Response samples
200401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"is_editable": true,
"staff_id": 12345,
"user_role": "owner",
"user_permissions": []
},
"meta": { }
}
Копирование пользователя в филиалы

post
/api/v1/company/{company_id}/users/{user_id}/copy_to_companies
Копирует пользователя с правами в несколько указанных филиалов. Если пользователя ранее не было в этих филиалах, он будет добавлен в них как активный. Если пользователь был приглашен в филиал, будут обновлены только его права, пользователю по-прежнему будет необходимо принять приглашение.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

user_id
required
number
Example: 123
Идентификатор пользователя.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
user_company_links
required
Array of objects non-empty unique
Список филиалов, куда необходимо скопировать права пользователя

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"user_company_links": [
{}
]
}
Response samples
200401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": null,
"meta": { }
}
Удаление пользователя из филиалов

post
/api/v1/company/{company_id}/users/{user_id}/remove_from_companies
Удаляет пользователя из нескольких указанных филиалов.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

user_id
required
number
Example: 123
Идентификатор пользователя.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
user_company_links
required
Array of objects non-empty unique
Список филиалов, откуда необходимо удалить пользователя

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"user_company_links": [
{}
]
}
Response samples
200401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": null,
"meta": { }
}
Пользователь
Описание разделов прав доступа:

Значение	Описание
'settings'	Список прав относящиеся к группе настройки
'finances'	Список прав относящиеся к группе финансы
'loyalty'	Список прав относящиеся к группе лояльность
'notification'	Список прав относящиеся к группе уведомления
'storages'	Список прав относящиеся к группе склады
'clients'	Список прав относящиеся к группе клиенты
'dashboard'	Список прав относящиеся к группе журнал записей
В списке прав содержатся следующие поля:

Поле	Тип	Описание
timetable_access	boolean	true - есть доступ к журналу записи, false - нет доступа
master_id	number	0 - если пользователь может просматривать расписание и записи всех сотрудников, иначе только того сотрудника, ID которого задан
position_id	number	0 - если пользователь может просматривать расписание и записи всех сотрудников, иначе только ту должность, ID которого задан
last_days_count	number	0 - не ограничить доступ к истории расписаний и записям
schedule_edit_access	boolean	true - есть доступ к графику работы сотрудника в журнале, false - нет доступа
timetable_phones_access	boolean	true - есть доступ к номеру телефона в журнале записи, false - нет доступа
timetable_transferring_record_access	boolean	true - есть доступ к переносу записей, false - нет доступа
timetable_statistics_access	boolean	true - есть доступ к просмотру статистики, false - нет доступа
record_form_access	boolean	true - есть доступ к окну записи, false - нет доступа
record_form_client_access	boolean	true - есть доступ к данным клиентов, false - нет доступа
records_autocomplete_access	boolean	true - есть доступ к выпадающему списку с данными о клиентах, false - нет доступа
create_records_access	boolean	true - есть доступ к созданию записей, false - нет доступа Создавать записи
edit_records_access	boolean	true - есть доступ к изменение записей, false - нет доступа
edit_records_attendance_access	boolean	true - есть доступ к записям со статусом визита "клиент пришел", false - нет доступа
records_services_cost_access	boolean	true - есть доступ к изменению стоимости услуг, false - нет доступа
records_services_discount_access	boolean	true - есть доступ к изменению скидки на услуги, false - нет доступа
record_edit_full_paid_access	boolean	true - есть доступ к редактированию оплаченной записи, false - нет доступа
delete_records_access	boolean	true - есть доступ к удалению записи, false - нет доступа
delete_customer_came_records_access	boolean	true - есть доступ к удалению записей со статусом "клиент пришел", false - нет доступа
delete_paid_records_access	boolean	true - есть доступ к удалению оплаченных записей, false - нет доступа
records_goods_access	boolean	true - есть доступ к продажам товаров, false - нет доступа
records_goods_create_transaction_access	boolean	true - есть доступ к созданию товарных транзакций, false - нет доступа
records_goods_create_last_days_count	number	-1 - есть доступ к созданию товарных транзакций за все время, >= 0 - доступ к созданию товарных транзакций за указанное количество дней прошлое
records_goods_edit_transaction_access	boolean	true - есть доступ к редактированию товарных транзакций, false - нет доступа
records_goods_edit_last_days_count	number	-1 - есть доступ к редактированию товарных транзакций за все время, >= 0 - доступ к редактированию товарных транзакций за указанное количество дней прошлое
records_goods_cost_access	boolean	true - есть доступ к изменению стоимость товаров, false - нет доступа
records_goods_discount_access	boolean	true - есть доступ к изменению скидки на товары, false - нет доступа
records_finances_access	boolean	true - есть доступ к оплате, false - нет доступа
records_finances_last_days_count	number	-1 - есть доступ к проведению оплаты в записях за все время, >= 0 - доступ к проведению оплаты в записях за указанное количество дней прошлое
records_finances_pay_from_deposits_access	boolean	true - есть доступ к проведению оплаты в записях с личного счета клиента, false - нет доступа
records_group_id_access	boolean	true - есть доступ к данным клиентов по сети, false - нет доступа
records_group_id	number	ID сети к которой есть доступ к данным клиентов
finances_access	boolean	true - есть доступ к финансам, false - нет доступа
finances_accounts_ids	array	массив ID к выбранным кассам
finances_transactions_access	boolean	true - есть доступ к просмотру движений средств, false - нет доступа
finances_last_days_count	number	-1 - есть доступ к просмотру движений средств за все время, >= 0 - доступ к просмотру движений средств за указанное количество дней прошлое
finances_create_transactions_access	boolean	true - есть доступ к созданию транзакций, false - нет доступа
finances_create_last_days_count	number	-1 - есть доступ к созданию транзакций за все время, >= 0 - доступ к созданию транзакций за указанное количество дней прошлое
finances_edit_transactions_access	boolean	true - есть доступ к редактированию транзакций, false - нет доступа
finances_edit_last_days_count	number	-1 - есть доступ к редактированию транзакций за все время, >= 0 - доступ к редактированию транзакций за указанное количество дней прошлое
finances_delete_transactions_access	boolean	true - есть доступ к удалению транзакций, false - нет доступа
finances_transactions_excel_access	boolean	true - есть доступ к выгрузке движений средств в Excel, false - нет доступа
finances_expenses_ids	array	true - есть доступ к переводам между кассами, false - нет доступа
finances_accounts_access	boolean	true - есть доступ к счетам и кассам, false - нет доступа
finances_accounts_banalce_access	boolean	true - есть доступ к балансу, false - нет доступа
finances_suppliers_read_access	boolean	true - есть доступ к контрагентам, false - нет доступа
finances_suppliers_create_access	boolean	true - есть доступ к созданию контрагентов, false - нет доступа
finances_suppliers_update_access	boolean	true - есть доступ к изменению контрагентов, false - нет доступа
finances_suppliers_delete_access	boolean	true - есть доступ к удалению контрагентов, false - нет доступа
finances_suppliers_excel_access	boolean	true - есть доступ к выгрузке в Excel, false - нет доступа
finances_expenses_read_access	boolean	true - есть доступ к статье платежей, false - нет доступа
expenses_read_access	boolean	true - есть доступ к статье платежей, false - нет доступа
finances_expenses_create_access	boolean	true - есть доступ к созданию статьи платежа, false - нет доступа
expenses_create_access	boolean	true - есть доступ к созданию статьи платежа, false - нет доступа
finances_expenses_update_access	boolean	true - есть доступ к изменению статьи платежа, false - нет доступа
expenses_update_access	boolean	true - есть доступ к изменению статьи платежа, false - нет доступа
finances_expenses_delete_access	boolean	true - есть доступ к удалению статьи платежа, false - нет доступа
expenses_delete_access	boolean	true - есть доступ к удалению статьи платежа, false - нет доступа
finances_kkm_transactions_access	boolean	true - есть доступ к операциям с KKM, false - нет доступа
kkm_transactions_accounts_access	boolean	true - есть доступ к операциям с KKM, false - нет доступа
finances_kkm_settings_read_access	boolean	true - есть доступ к настройкам KKM, false - нет доступа
kkm_settings_reed_access	boolean	true - есть доступ к настройкам KKM, false - нет доступа
finances_kkm_settings_update_access	boolean	true - есть доступ к изменению KKM, false - нет доступа
kkm_settings_update_access	boolean	true - есть доступ к изменению KKM, false - нет доступа
finances_settings_invoicing_read_access	boolean	true - есть доступ к онлайн-оплатам, false - нет доступа
finances_settings_invoicing_update_access	boolean	true - есть доступ к изменению онлайн-оплат, false - нет доступа
settings_invoicing_update_access	boolean	true - есть доступ к изменению онлайн-оплат, false - нет доступа
finances_options_read_access	boolean	true - есть доступ к настройкам оплаты, false - нет доступа
finances_options_update_access	boolean	true - есть доступ к изменению настроек оплаты, false - нет доступа
options_update_access	boolean	true - есть доступ к изменению настроек оплаты, false - нет доступа
finances_salary_schemes_access	boolean	true - есть доступ к схемам расчета заработной платы, false - нет доступа
finances_salary_calc_access	boolean	true - есть доступ к расчету заработной платы, false - нет доступа
finances_salary_not_limitation_today_access	boolean	true - есть доступ к расчету заработной платы, false - доступ к расчету заработной платы за текущий день
finances_payroll_calculation_create_access	boolean	true - есть доступ к начислению заработной платы, false - нет доступа
finances_payroll_calculation_create_not_limitation_today_access	boolean	true - есть доступ к начислению заработной платы, false - доступ к начислению заработной платы за текущий день
finances_salary_access_master_checkbox	boolean	true - есть доступ к расчету заработной платы только конкретного сотрудника, false - полный доступ
finances_salary_access_master_id	number	ID сотрудника к которому есть доступ на расчет заработной платы
get_salary_access_master_id	number	ID сотрудника к которому есть доступ на расчет заработной платы
finances_salary_master_not_limitation_today_access	boolean	true - не ограничивать текущим днем, false - доступ только на сегодняшний день
finances_payroll_calculation_create_by_master_access	boolean	true - есть доступ к начислению заработной платы по конкретному сотруднику, false - без ограничений
calculation_create_by_master_not_limitation_today_access	boolean	true - есть доступ к начислению заработной платы, false - нет доступа
finances_period_report_access	boolean	true - есть доступ к отчету за период, false - нет доступа
finances_period_report_excel_access	boolean	true - есть доступ к выгрузке в Excel отчета за период, false - нет доступа
finances_year_report_access	boolean	true - есть доступ к годовому отчету, false - нет доступа
finances_year_report_excel_access	boolean	true - есть доступ к выгрузке в Excel годового отчета, false - нет доступа
finances_print_check_access	boolean	true - есть доступ к печати чека, false - нет доступа
finances_z_report_access	boolean	true - есть доступ к отчету по кассе за день, false - нет доступа
finances_z_report_no_limit_today_access	boolean	true - есть доступ к отчету по кассе, false - доступ к отчету по кассе за текущий день
finances_z_report_excel_access	boolean	true - есть доступ к выгрузке в Excel, false - нет доступа
clients_access	boolean	true - есть доступ к клиентской базе, false - нет доступа
clients_phones_email_access	boolean	true - есть доступ к номерам телефонов и email в списке клиентов, false - нет доступа
client_phones_access	boolean	true - есть доступ к номерам телефонов в списке клиентов, false - нет доступа
clients_card_phone_access	boolean	true - есть доступ к телефонам в карточке клиента, false - нет доступа
clients_delete_access	boolean	true - есть доступ к удалению клиентов, false - нет доступа
clients_excel_access	boolean	true - есть доступ к выгрузке списка клиентов в Excel, false - нет доступа
excel_access	number	1 - есть доступ к выгрузке списка клиентов в Excel, 0 - нет доступа
client_comments_list_access	boolean	true - есть доступ к просмотру комментарии, false - нет доступа
client_comments_add_access	boolean	true - есть доступ к добавлению комментарии, false - нет доступа
client_comments_own_edit_access	boolean	true - есть доступ к изменению/удалению своих комментарии, false - нет доступа
client_comments_other_edit_access	boolean	true - есть доступ к изменению/удалению чужих комментарии, false - нет доступа
client_files_list_access	boolean	true - есть доступ к просмотрам и скачиванию файлов, false - нет доступа
client_files_upload_access	boolean	true - есть доступ к загрузке файлов, false - нет доступа
client_files_delete_access	boolean	true - есть доступ к удалению файлов, false - нет доступа
clients_visit_master_id	number	ID мастера по которому можно посмотреть клиентов посещавшие мастера, 0 - без ограничений
get_visit_master_id	number	ID мастера по которому можно посмотреть клиентов посещавшие мастера, 0 - без ограничений
dashboard_access	boolean	true - есть доступ к разделу обзор, false - нет доступа
dash_access	boolean	true - есть доступ к разделу сводка, false - нет доступа
dash_phones_access	boolean	true - есть доступ к показу номера телефонов в сводке, false - нет доступа
dash_records_access	boolean	true - есть доступ к просмотру списка записей, false - нет доступа
dash_records_last_days_count	number	-1 - есть доступ к просмотру списка записей за все время, >= 0 - доступ к просмотру списка записей за указанное количество дней прошлое
dash_records_excel_access	boolean	true - есть доступ к выгрузке списка записей в Excel, false - нет доступа
dash_records_phones_access	boolean	true - есть доступ к показу номера телефонов в записях, false - нет доступа
dash_message_access	boolean	true - есть доступ к просмотру детализаций сообщений, false - нет доступа
dash_message_excel_access	boolean	true - есть доступ к выгрузке детализаций сообщений в Excel, false - нет доступа
dash_message_phones_access	boolean	true - есть доступ к показу номера телефонов в сообщениях, false - нет доступа
dash_reviews_access	boolean	true - есть доступ к просмотру отзывов, false - нет доступа
dash_reviews_delete_access	boolean	true - есть доступ к удалению отзывов, false - нет доступа
dashboard_calls_access	boolean	true - есть доступ к разделу звонки, false - нет доступа
dashboard_calls_excel_access	boolean	true - есть доступ к выгрузке звонков Excel, false - нет доступа
dashboard_calls_phones_access	boolean	true - есть доступ к просмотру номера телефона у клиентов, false - нет доступа
notification	boolean	true - есть доступ к Уведомления, false - нет доступа
web_push	boolean	true - есть доступ к показу Push уведомлений о записях в Web-версии, false - нет доступа
web_phone_push	boolean	true - есть доступ к показу Push уведомлений о звонках в Web-версии, false - нет доступа
notification_sms_ending_license	boolean	true - есть доступ к отправки SMS уведомлений о скором окончании лицензии, false - нет доступа
notification_sms_low_balance	boolean	true - есть доступ к отправки SMS уведомлений о низком балансе, false - нет доступа
notification_email_ending_license	boolean	true - есть доступ к отправки Email уведомлений о скором окончании лицензии, false - нет доступа
loyalty_access	boolean	true - есть доступ к лояльности, false - нет доступа
has_loyalty_access	boolean	true - есть доступ к лояльности, false - нет доступа
loyalty_cards_manual_transactions_access	boolean	true - есть доступ к ручному пополнению/списанию с карт лояльности, false - нет доступа
has_loyalty_cards_manual_transactions_access	boolean	true - есть доступ к ручному пополнению/списанию с карт лояльности, false - нет доступа
loyalty_certificate_and_abonement_manual_transactions_access	boolean	true - есть доступ к оплате сертификатом и абонементом без кода, false - нет доступа
storages_access	boolean	true - есть доступ к складу, false - нет доступа
storages_ids	boolean	true - есть доступ к выбранным складам, false - нет доступа
storages_transactions_access	boolean	true - есть доступ к просмотру движений товаров, false - нет доступа
storages_last_days_count	number	-1 - есть доступ к просмотру движений товаров за все время, >= 0 - доступ к просмотру движений товаров за указанное количество дней прошлое
storages_move_goods_access	boolean	true - есть доступ к перемещение товаров между складами, false - нет доступа
storages_create_transactions_access	boolean	true - есть доступ к созданию товарных транзакций, false - нет доступа
storages_create_last_days_count	number	-1 - есть доступ к создание товарных транзакций за все время, >= 0 - доступ к создание товарных транзакций за указанное количество дней прошлое
storages_create_transactions_buy_access	boolean	true - есть доступ к оформлению прихода товаров, false - нет доступа
storages_create_transactions_sale_access	boolean	true - есть доступ к оформлению продаж товаров, false - нет доступа
storages_edit_transactions_access	boolean	true - есть доступ к редактированию товарных транзакций, false - нет доступа
storages_edit_last_days_count	number	-1 - есть доступ к редактированию товарных транзакций за все время, >= 0 - доступ к редактированию товарных транзакций за указанное количество дней прошлое
storages_edit_transactions_buy_access	boolean	true - есть доступ к оформлению прихода товаров, false - нет доступа
storages_edit_transactions_sale_access	boolean	true - есть доступ к оформлению продаж товаров, false - нет доступа
storages_delete_transactions_access	boolean	true - есть доступ к удалению товарных транзакций, false - нет доступа
storages_transactions_excel_access	boolean	true - есть доступ к выгрузке движений товаров в Excel, false - нет доступа
storages_transactions_types	boolean	true - есть доступ к выгрузке движений товаров в Excel, false - нет доступа
storages_inventory_access	boolean	true - есть доступ к инвентаризации, false - нет доступа
storages_inventory_create_edit_access	boolean	true - есть доступ к созданию и редактированию инвентаризации, false - нет доступа
storages_inventory_delete_access	boolean	true - есть доступ к удалению инвентаризации, false - нет доступа
storages_inventory_excel_access	boolean	true - есть доступ к выгрузке инвентаризации в Excel, false - нет доступа
storages_remnants_report_access	boolean	true - есть доступ к отчету остатков на складе, false - нет доступа
storages_remnants_report_excel_access	boolean	true - есть доступ к выгрузке остатков в Excel, false - нет доступа
storages_sales_report_access	boolean	true - есть доступ к отчету по продажам, false - нет доступа
storages_sales_report_excel_access	boolean	true - есть доступ к выгрузке отчета по продажам в Excel, false - нет доступа
storages_consumable_report_access	boolean	true - есть доступ к отчету по списанию расходников, false - нет доступа
storages_consumable_report_excel_access	boolean	true - есть доступ к выгрузке отчета по списанию расходников в Excel, false - нет доступа
storages_write_off_report_access	boolean	true - есть доступ к отчету по списанию товаров, false - нет доступа
storages_write_off_report_excel_access	boolean	true - есть доступ к выгрузке отчета по списанию товаров в Excel, false - нет доступа
storages_turnover_report_access	boolean	true - есть доступ к отчету по оборачиваемости, false - нет доступа
storages_turnover_report_excel_access	boolean	true - есть доступ к выгрузке отчета по оборачиваемости в Excel, false - нет доступа
storages_goods_crud_access	boolean	true - есть доступ к управлению товарами, false - нет доступа
storages_goods_create_access	boolean	true - есть доступ к созданию товаров, false - нет доступа
storages_goods_update_access	boolean	true - есть доступ к изменению товаров, false - нет доступа
storages_goods_title_edit_access	boolean	true - есть доступ к названию, Артикул, Штрих-код, false - нет доступа
storages_goods_category_edit_access	boolean	true - есть доступ к категориям, false - нет доступа
storages_goods_selling_price_edit_access	boolean	true - есть доступ к ценам продажи, false - нет доступа
storages_goods_cost_price_edit_access	boolean	true - есть доступ к себестоимости, false - нет доступа
storages_goods_units_edit_access	boolean	true - есть доступ к единицам измерения, false - нет доступа
storages_goods_critical_balance_edit_access	boolean	true - есть доступ к критичным остаткам, Желаемый остаток, false - нет доступа
storages_goods_masses_edit_access	boolean	true - есть доступ к массе, false - нет доступа
storages_goods_comment_edit_access	boolean	true - есть доступ к комментариям, false - нет доступа
storages_goods_archive_access	boolean	true - есть доступ к архивации и восстановлению товаров, false - нет доступа
storages_goods_delete_access	boolean	true - есть доступ к удалению товаров, false - нет доступа
settings_access	boolean	true - есть доступ к разделу настройки, false - нет доступа
settings_basis_access	boolean	true - есть доступ к разделу Основные, false - нет доступа
settings_information_access	boolean	true - есть доступ к разделу Информация, false - нет доступа
users_access	boolean	true - есть доступ к управлению пользователями, false - нет доступа
delete_users_access	boolean	true - есть доступ к удалению пользователей, false - нет доступа
create_users_access	boolean	true - есть доступ к добавлению пользователей, false - нет доступа
edit_users_access	boolean	true - есть доступ к управлению правами пользователей, false - нет доступа
limited_users_access	boolean	true - есть доступ к управлению правами в рамках своего набора прав, false - нет доступа
settings_services_access	boolean	true - есть доступ к разделу Услуги, false - нет доступа
settings_services_create_access	boolean	true - есть доступ к созданию услуг, false - нет доступа
services_edit	boolean	true - есть доступ к редактированию услуг, false - нет доступа
settings_services_edit_title_access	boolean	true - есть доступ к названиям услуг и название для онлайн-записи, false - нет доступа
settings_services_relation_category_access	boolean	true - есть доступ к категориям услуги, false - нет доступа
settings_services_edit_price_access	boolean	true - есть доступ к ценам услуг, false - нет доступа
settings_services_edit_image_access	boolean	true - есть доступ к загрузкам и изменениям изображений, false - нет доступа
settings_services_edit_online_seance_date_time_access	boolean	true - есть доступ к отображениям услуг в виджете, false - нет доступа
settings_services_edit_online_pay_access	boolean	true - есть доступ к онлайн-оплате услуги, false - нет доступа
settings_services_edit_services_related_resource_access	boolean	true - есть доступ к ресурсам услуги, false - нет доступа
settings_positions_read	boolean	true - есть доступ к разделу должности, false - нет доступа
settings_positions_create	boolean	true - есть доступ к созданию должностей, false - нет доступа
settings_positions_delete	boolean	true - есть доступ к удалению должностей, false - нет доступа
edit_master_service_and_duration	boolean	true - есть доступ к изменению услуги сотрудников и их длительность, false - нет доступа
tech_card_edit	boolean	true - есть доступ к изменению технологической карты, false - нет доступа
services_delete	boolean	true - есть доступ к удалению услуг, false - нет доступа
settings_master_access	boolean	true - есть доступ к разделу Сотрудники, false - нет доступа
master_create	boolean	true - есть доступ к созданию сотрудников, false - нет доступа
master_edit	boolean	true - есть доступ к редактированию сотрудников, false - нет доступа
master_delete	boolean	true - есть доступ к удалению сотрудников, false - нет доступа
settings_master_dismiss_access	boolean	true - есть доступ к увольнению сотрудников, false - нет доступа
schedule_edit	boolean	true - есть доступ к редактированию графика работы, false - нет доступа
settings_notifications_access	boolean	true - есть доступ к разделу Sms уведомления, false - нет доступа
settings_email_notifications_access	boolean	true - есть доступ к разделу Email уведомления, false - нет доступа
settings_template_notifications_access	boolean	true - есть доступ к разделу Типы уведомлений, false - нет доступа
webhook_read_access	boolean	true - есть доступ к изменению настроек WebHook, false - нет доступа
stat_access	boolean	true - есть доступ к аналитике, false - нет доступа
billing_access	boolean	true - есть доступ к биллингу (раздел меню баланс), false - нет доступа
send_sms	boolean	true - есть доступ к SMS рассылки клиентам, false - нет доступа
auth_enable_check_ip	boolean	true - есть доступ к филиалу только с IP-адресов (v4, v6), false - нет доступа
auth_list_allowed_ip	array	список IP адресов
Параметр
company_id (required, number, 1) - ID компани
Получить список прав

get
/api/v1/user/permissions/{company_id}
Параметр
company_id (required, number, 1) - ID компании
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с категориями прав доступа

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"timetable": {},
"record_form": {},
"finances": {},
"clients": {},
"dashboard": {},
"notification": {},
"loyalty": {},
"storages": {},
"settings": {},
"other": {}
},
"meta": [ ]
}
Создание и отправка приглашения

post
/api/v1/user/invite/{salon_id}
Приглашение к управлению филиалом предполагает отправку по e-mail или телефону ссылки. Перейдя по этой ссылке, пользователь после регистрации получает доступ к управлению филиалом в соответствии с назначенными правами. Назначение прав осуществляется после отправки приглашения отдельным запросом.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
invites
required
Array of objects
Массив приглашений

Responses
202 Accepted
Response Schema: application/json
success
boolean
Статус успешной отправка (true)

data
string
Имеет значение null

meta
object
Метаданные (содержит сообщение о том, что данные сохранены)

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"invites": [
{}
]
}
Response samples
202401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"meta": {
"message": "Сохранено"
}
}
Сотрудники
Для работы с сотрудниками используются следующие методы

Объект сотрудника имеет следующие поля:

Поле	Тип	Описание
id	number	Идентификатор сотрудника
api_id	string|null	Внешний идентификатор сотрудника
name	string	Имя сотрудника
specialization	string	Специализация сотрудника
position	object	Должность сотрудника
weight	number	Вес сотрудника. При выводе сотрудники сортируются по весу, сначала более тяжелые
show_rating	number	Показывать ли рейтинг сотрудника (1 - показывать, 0 - не показывать)
rating	number	Ретинг сотрудника
votes_count	number	Кол-во голосов, оценивших сотрудника
comments_count	number	Кол-во комментариев к сотрунику
avatar	string	Путь к файлу аватарки сотрудника
avatar_big	string	Путь к файлу аватарки сотрудника в более высоком разрешении
information	string	Дополнительная информация о сотруднике (HTML формат)
hidden	number	1 - скрыт от онлайн записей, 0 - не скрыт
fired	number	1 - уволен, 0 - не уволен
status	number	Статус удаления сотрудника, 1 - удален, 0 - не удален
image_group	object	Группа изображений сотрудника
Быстрое создание сотрудника

post
/api/v1/company/{company_id}/staff/quick
Создает нового сотрудника в филиале с минимальным набором входных параметров.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
name
required
string
Имя сотрудника.

specialization
required
string
Специализация сотрудника.

position_id
required
number or null
Идентификатор должности, к которой необходимо привязать сотрудника.

phone_number
required
string or null
Номер телефона пользователя, к которому необходимо привязать сотрудника (без "+", от 9 до 15 цифр).

Responses
201 Created
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "Сотрудник с Должностью")
meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
{
"name": "Иван Иванов",
"specialization": "Мастер",
"position_id": 123,
"phone_number": "71234567890"
}
Response samples
201401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 123,
"name": "Иван Иванов",
"company_id": 123,
"specialization": "Мастер",
"avatar": "https://yclients.com/images/no-master-sm.png",
"avatar_big": "https://yclients.com/images/no-master.png",
"position": {}
},
"meta": { }
}
Устаревшее. Добавить нового сотрудника Deprecated

post
/api/v1/staff/{company_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
name
string
Имя сотрудника

specialization
string
Специализация сотрудника

weight
number
Вес сотрудника. При выводе сотрудники сортируются по весу, сначала более тяжелые

information
string
Информация о сотруднике (HTML-формат)

api_id
string
Внещний идентификатор сотрудника

hidden
number
Статус отображения в онлайн-записи, 1 - скрыт, 0 - не скрыт

fired
number
Статус увольнения сотрудника, 1 - уволен, 0 - не уволен

user_id
number
ID привязанного пользователя, 0 - удалить связь с пользователем

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержат количество найденных сотрудников)

Request samples
Payload
Content type
application/json

Copy
{
"name": "Василий",
"specialization": "парикмахер",
"weight": 10,
"information": "Стрижет методом трех рук",
"api_id": "42",
"hidden": 0,
"fired": 0,
"user_id": 123
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 17969,
"api_id": "42",
"name": "Василий",
"specialization": "парикмахер",
"position": {},
"show_rating": 0,
"rating": 0,
"votes_count": 0,
"user_id": 12345,
"avatar": "https://yclients.com/uploads/masters/sm/20151018220924_4963.jpg",
"avatar_big": "https://yclients.com/uploads/masters/norm/20151018220924_4963.jpg",
"comments_count": 0,
"weight": 10,
"information": "<span><span><span>&nbsp;</span></span></span>",
"hidden": 0,
"fired": 0,
"status": 0
},
"meta": [ ]
}
Получить список сотрудников / конкретного сотрудника

get
/api/v1/company/{company_id}/staff/{staff_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID филиала

staff_id
required
number
ID сотрудника, если нужно работать с конкретным сотрудником.

header Parameters
Accept
required
string
application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержат количество найденных сотрудников)

403 Forbidden
Response Schema: application/json
success
boolean
Статус успешности выполнения (false)

data
string
Содержит null

meta
object
Метаданные (содержит в себе сообщение об ошибке)

404 Not Found
Response Schema: application/json
success
boolean
Статус успешности выполнения (false)

meta
object
Метаданные (содержит в себе сообщение об ошибке)

Response samples
200403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{}
],
"meta": {
"total_count": 1
}
}
Устаревшее. Получить список сотрудников / конкретного сотрудника Deprecated

get
/api/v1/staff/{company_id}/{staff_id}
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

staff_id
required
number
ID сотрудника, если нужно работать с конкретным сотрудником.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{},
{}
],
"meta": [ ]
}
Изменить сотрудника

put
/api/v1/staff/{company_id}/{staff_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

staff_id
required
number
ID сотрудника

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: */*
name
string
Имя сотрудника

specialization
string
Специализация сотрудника

weight
number
Вес сотрудника. При выводе сотрудники сортируются по весу, сначала более тяжелые

information
string
Информация о сотруднике (HTML-формат)

api_id
string
Внещний идентификатор сотрудника

hidden
number
Статус отображения в онлайн-записи, 1 - скрыт, 0 - не скрыт

fired
number
Статус увольнения сотрудника, 1 - уволен, 0 - не уволен

user_id
number
ID привязанного пользователя, 0 - удалить связь с пользователем

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержат количество найденных сотрудников)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 17969,
"api_id": "42",
"name": "Василий",
"specialization": "парикмахер",
"position": {},
"show_rating": 0,
"rating": 0,
"votes_count": 0,
"user_id": 12345,
"avatar": "https://yclients.com/uploads/masters/sm/20151018220924_4963.jpg",
"avatar_big": "https://yclients.com/uploads/masters/norm/20151018220924_4963.jpg",
"comments_count": 0,
"weight": 10,
"information": "<span><span><span>&nbsp;</span></span></span>",
"hidden": 0,
"fired": 0,
"status": 0
},
"meta": [ ]
}
Удалить сотрудника

delete
/api/v1/staff/{company_id}/{staff_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

staff_id
required
number
ID сотрудника

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
204 No Content
Должности
Описание методов для работы с должностями сотрудников

Получить список должностей компании

get
/api/v1/company/{company_id}/staff/positions/
Метод позволяет получить список актуальных должностей компании

Authorizations:
(beareruser)
path Parameters
company_id
required
number
Идентификатор компании

Responses
200 Список должностей компании
Response Schema: application/json
data
required
Array of objects (StaffPosition)
Массив объектов с данными

meta
required
Array of objects
Метаданные (содержит количество найденных должностей)

success
required
boolean
Статус успешности выполнения (true)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"data": [
{}
],
"meta": [
{ }
],
"success": true
}
Быстрое создание должности

post
/api/v1/company/{company_id}/positions/quick/
Создает новую должность в филиале; должность создается как сетевая сущность и одновременно привязывается к филиалу, в которой запрошено ее создание.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
title
required
string
Название должности.

Responses
201 Created
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "Должность")
Данные существующей должности в сети.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
{
"title": "Должность"
}
Response samples
201401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 123,
"chain_id": 123,
"title": "Должность",
"description": "Описание должности",
"services_binding_type": 0,
"rules_required_fields": [],
"only_chain_appointment": false
},
"meta": { }
}
Клиенты
Для работы с клиентами

Коллекция клиентов
Параметр
company_id (required, number, 1) - ID компании
Получить список клиентов

post
/api/v1/company/{company_id}/clients/search
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
page
number
Номер страница

page_size
number
Количество выводимых строк на странице. Максимум 200. (По умолчанию 25)

fields
Array of strings
Поля, которые нужно вернуть в ответе

order_by
string
Enum: "id" "name" "phone" "email" "discount" "first_visit_date" "last_visit_date" "sold_amount" "visits_count"
По какому полю сортировать

order_by_direction
string
Enum: "ASC" "DESC"
Как сортировать (по возрастанию / по убыванию)

operation
string
Enum: "AND" "OR"
Тип операции

filters
Array of objects
Фильтры для поиска по клиентам

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержит количество найденных клиентов)

400 Bad Request
Response Schema: application/json
success
boolean
Статус успешности выполнения (false)

data
string
Содержит null

meta
object
Метаданные (содержит сообщение об ошибке)

402 Payment Required
Response Schema: application/json
success
boolean
Статус успешности выполнения (false)

data
string
Содержит null

meta
object
Метаданные (содержит сообение об ошибке)

404 Когда указан филиал не в виде целого числа
Response Schema: application/json
success
boolean
Статус успешности выполнения (false)

meta
object
Метаданные (содержит сообщение об ошибке)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"page": 1,
"page_size": 3,
"fields": [
"id",
"name"
],
"order_by": "name",
"order_by_direction": "desc",
"operation": "AND",
"filters": [
{},
{},
{},
{},
{},
{},
{},
{},
{},
{},
{},
{},
{}
]
}
Response samples
200400402404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{},
{}
],
"meta": {
"total_count": 908
}
}
Устаревшее. Получить список клиентов Deprecated

get
/api/v1/clients/{company_id}
Параметр
company_id (required, number, 1) - ID компании
page (number, 1) - Номер страницы
count (number, 20) - Количество клиентов на странице
Фильтрация клиентов
fullname:Joh (optional, string) - Имя (часть имени) для фильтрации клиентов
phone:7916 (optional, string) - Телефон (часть номера) для фильтрации клиентов
email:test@ (optional, string) - Email (часть) для фильтрации клиентов
card:5663rt (optional, string) - Card (часть) для фильтрации клиентов по номеру карты лояльности
paid_min:100 (optional, number) - Минимально оплачено в кассу, для фильтрации клиентов по сумме оплат
paid_max:0 (optional, number) - Максимально оплачено в кассу, для фильтрации клиентов по сумме оплат
paid_max:0 (optional, number) - Максимально оплачено в кассу, для фильтрации клиентов по сумме оплат
id:66 (optional, number) - ID одного клиента для фильтрации клиентов
id[]: 66 (optional, array) - ID нескольких клиентов для фильтрации
changed_after: '2000-01-01T00:00:00' (optional, string) - Фильтрация клиентов, измененных/созданных начиная с конкретной даты и времени
changed_before: '2020-12-31T23:59:59' (optional, string) - Фильтрация клиентов, измененных/созданных до конкретной даты и времени
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

query Parameters
fullname
string
Example: fullname=Joh
Имя (часть имени) для фильтрации клиентов

phone
string
Example: phone=7916
Телефон (часть номера) для фильтрации клиентов

email
string
Example: email=test@
Email (часть) для фильтрации клиентов

paid_min
number
Example: paid_min=1
Минимально оплачено в кассу, для фильтрации клиентов по сумме оплат

paid_max
number
Example: paid_max=1
Максимально оплачено в кассу, для фильтрации клиентов по сумме оплат

page
number
Example: page=1
Номер страницы

count
number
Example: count=20
Количество клиентов на странице

id
number
Example: id=66
ID одного или нескольких клиентов для фильтрации клиентов

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержит номер страницы и количество клиентов на странице)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": {
"page": 1,
"total_count": 8
}
}
Добавить клиента

post
/api/v1/clients/{company_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: */*
name
required
string
Имя клиента

surname
string
Фамилия клиента

patronymic
string
Отчество клиента

phone
required
string
Телефон клиента

email
string
Email клиента

sex_id
number
Пол клиента (1 - мужской, 2 - женский, 0 - не известен)

importance_id
number
Класс важности клиента (0 - нет, 1 - бронза, 2 - серебро, 3 - золото)

discount
number
Скидка клиента

card
string
Номер карты клиента

birth_date
string
Дата рождения клиента в формате yyyy-mm-dd

comment
string
Комментарий

spent
number
Сколько потратил средств в компании на момент добавления

balance
number
Баланс клиента

sms_check
number
1 - Поздравлять с Днем Рождения по SMS, 0 - не поздравлять

sms_not
number
1 - Исключить клиента из SMS рассылок, 0 - не исключать

categories
object
Массив идентификаторов категорий клиента

custom_fields
object
Массив дополнительных полей клиента в виде пар "api-key": "value"

Responses
201 Created
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 1121412,
"name": "Василий",
"surname": "Сонов",
"patronymic": "Васильевич",
"phone": 79211234567,
"email": "123456789@gmail.com",
"categories": [ ],
"sex": "Мужской",
"sex_id": 1,
"discount": 15,
"importance_id": 1,
"importance": "Бронза",
"card": "555888666",
"birth_date": "2010-01-01",
"comment": "кидает понты",
"sms_check": 0,
"sms_not": 0,
"spent": 1000,
"balance": -1200,
"visits": 0,
"last_change_date": "2020-05-01T12:00:00+0400",
"custom_fields": {}
},
"meta": [ ]
}
Массовое добавление клиентов

post
/api/v1/clients/{company_id}/bulk
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: */*
name
required
string
Имя клиента

surname
string
Фамилия клиента

patronymic
string
Отчество клиента

phone
required
string
Телефон клиента

email
string
Email клиента

sex_id
number
Пол клиента (1 - мужской, 2 - женский, 0 - не известен)

importance_id
number
Класс важности клиента (0 - нет, 1 - бронза, 2 - серебро, 3 - золото)

discount
number
Скидка клиента

card
string
Номер карты клиента

birth_date
string
Дата рождения клиента в формате yyyy-mm-dd

comment
string
Комментарий

spent
number
Сколько потратил средств в компании на момент добавления

balance
number
Баланс клиента

sms_check
number
1 - Поздравлять с Днем Рождения по SMS, 0 - не поздравлять

sms_not
number
1 - Исключить клиента из SMS рассылок, 0 - не исключать

categories
object
Массив идентификаторов категорий клиента

Responses
200 OK
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"created": [],
"errors": []
},
"meta": [ ]
}
Пример запроса на получение списка файлов клиента

get
/api/v1/company/{company_id}/clients/files/{client_id}
Список загруженных файлов клиента можно получить, сделав запрос с указанием идентификатора филиала и идентификатора клиента, для которого необходимо получить список. Идентификатор клиента можно получить из коллекции клиентов.

Список представляет собой массив файлов клиента.

Файл клиента имеет следующую структуру:

Поле	Тип	Описание
id	number	Идентификатор файла
client_id	number	Идентификатор клиента
name	string	Имя файла с расширением
description	string	Описание файла
extension	string	Расширение имени файла
mime	string	MIME-тип файла
link	string	Ссылка на скачивание файла
date_create	string	Дата загрузки файла в формате ISO8601
size	string	Форматированная строка размера файла
user_name	string	Имя пользователя, загрузившего файл
user_avatar	string	Аватар пользователя, загрузившего файл
can_edit	boolean	Есть ли право изменять и удалять файл? true - право есть, false - права нет
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

client_id
required
number
ID клиента

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержит количество файлов)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": {
"count": 2
}
}
Пример запроса на удаление

delete
/api/v1/company/{company_id}/clients/files/{client_id}/{file_id}
Authorizations:
bearer
path Parameters
company_id
required
number
ID компании

client_id
required
number
ID клиента

file_id
required
number
ID файла

header Parameters
Accept
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Responses
202 Accepted
Response samples
202
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"meta": {
"message": "Accepted"
}
}
Поиск по истории посещений клиента

post
/api/v1/company/{company_id}/clients/visits/search
Выводит записи из истории посещений клиента по его идентификатору или номеру телефона. В ответ попадают записи и продажи товаров, объединенные по визитам, отфильтрованные по статусу посещения и статусу оплаты визита. Результат сортируется по дате и разбивается на страницы по 25 элементов (или более, если дата последней записи совпадает с датой следующей записи). Идентификация клиента происходит по входному параметру client_id либо по client_phone. Остальные параметры могут иметь пустое значение.
Для получения данных на следующей странице необходимо выполнить запрос с параметрами from и to, полученными в результате текущего запроса в поле meta.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
client_id
required
number or null
Идентификатор клиента.

client_phone
required
string or null
Номер телефона клиента.

from
required
string or null <date>
Дата начала периода.

to
required
string or null <date>
Дата конца периода.

payment_statuses
required
Array of strings
Items Enum: "not_paid" "paid_not_full" "paid_full" "paid_over"
Статус оплаты визита:
not_paid - визит неоплачен, никаких оплат по визиту не проходило;
paid_not_full - визит оплачен частично;
paid_full - визит оплачен полностью, переплаты нет;
paid_over - по визиту есть переплата.
Если фильтр по статусу оплаты не требуется, то необходимо передать пустой массив [].

attendance
required
number or null
Enum: -1 0 1 2
Статус посещения:
-1: - клиент не пришёл;
0: - ожидание клиента;
1: - клиент пришёл;
2: - клиент подтвердил запись.

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "История посещений клиента")
Данные по визитам клиента, включая записи и продажи товаров.

meta
object (Объект информации о постраничной навигации, основанной на дате.)
Информация о постраничной навигации, содержащая данные о текущей, следующей и предыдущей страницах. Данные отсортированы и разбиты на страницы по датам в убывающем порядке.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"client_id": 123,
"client_phone": "79998887766",
"from": "2022-01-31",
"to": "2022-02-01",
"payment_statuses": [
"not_paid"
],
"attendance": -1
}
Response samples
200401404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"goods_transactions": [],
"records": []
},
"meta": {
"dateCursor": {}
}
}
Получить клиента

get
/api/v1/client/{company_id}/{id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

id
required
number
ID клиента

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 16,
"name": "Василий",
"surname": "Сонов",
"patronymic": "Васильевич",
"phone": 79112345679,
"email": "",
"categories": [ ],
"sex": "Неизвестно",
"discount": 0,
"importance": "Без класса важности",
"card": "",
"birth_date": 0,
"comment": "",
"sms_check": 0,
"sms_not": 0,
"spent": 0,
"balance": 0,
"visits": 3,
"last_change_date": "2020-03-01T12:00:00+0400",
"custom_fields": [ ]
},
"meta": [ ]
}
Редактировать клиента

put
/api/v1/client/{company_id}/{id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

id
required
number
ID клиента

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: */*
name
required
string
Имя клиента

surname
string
Фамилия клиента

patronymic
string
Отчество клиента

phone
required
string
Телефон клиента

email
string
Email клиента

sex_id
number
Пол клиента (1 - мужской, 2 - женский, 0 - не известен)

importance_id
number
Класс важности клиента (0 - нет, 1 - бронза, 2 - серебро, 3 - золото)

discount
number
Скидка клиента

card
string
Номер карты клиента

birth_date
string
Дата рождения клиента в формате yyyy-mm-dd

comment
string
Комментарий

spent
number
Сколько потратил средств в компании на момент добавления

balance
number
Баланс клиента

sms_check
number
1 - Поздравлять с Днем Рождения по SMS, 0 - не поздравлять

sms_not
number
1 - Исключить клиента из SMS рассылок, 0 - не исключать

labels
object
Массив идентификаторов категорий клиента

custom_fields
object
Массив дополнительных полей клиента в виде пар "api-key": "value"

Responses
200 OK
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 1121412,
"name": "Василий",
"surname": "Сонов",
"patronymic": "Васильевич",
"phone": 79211234567,
"email": "123456789@gmail.com",
"categories": [ ],
"sex": "Мужской",
"sex_id": 1,
"discount": 15,
"importance_id": 1,
"importance": "Бронза",
"card": "555888666",
"birth_date": "2010-01-01",
"comment": "кидает понты",
"sms_check": 0,
"sms_not": 0,
"spent": 1000,
"balance": -1200,
"visits": 0,
"last_change_date": "2020-06-01T12:00:00+0400",
"custom_fields": {}
},
"meta": [ ]
}
Удалить клиента

delete
/api/v1/client/{company_id}/{id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

id
required
number
ID клиента

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
204 No Content
Получение списка комментариев к клиенту

get
/api/v1/company/{company_id}/clients/{client_id}/comments
Возвращает список комментариев к клиенту, а также историю загрузки файлов в карточку клиента в виде комментариев.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

client_id
required
number
Example: 123
Идентификатор клиента филиала.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Responses
200 OK
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
Array of objects (Объект модели "Комментарий к клиенту")
meta
object (Объект дополнительной информации о запросе с кол-вом найденных результатов)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Response samples
200401403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{}
],
"meta": {
"count": 10
}
}
Добавление комментария к клиенту

post
/api/v1/company/{company_id}/clients/{client_id}/comments
Создает новый текстовый комментарий к клиенту.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

client_id
required
number
Example: 123
Идентификатор клиента филиала.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Request Body schema: application/json
text
required
string
Текст комментария к клиенту.

Responses
201 Created
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object (Объект модели "Комментарий к клиенту")
Данные по комментарию к клиенту.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

422 Unprocessable Entity
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке валидации данных запроса)
Дополнительная информация о запросе.

Request samples
Payload
Content type
application/json

Copy
{
"text": "Комментарий к клиенту"
}
Response samples
201401403404422
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 123,
"create_date": "2023-01-01 12:12:12",
"update_date": "2023-01-01 12:12:12",
"type": "default",
"text": "Комментарий к клиенту",
"files": [ ],
"user": {}
},
"meta": { }
}
Удаление комментария к клиенту

delete
/api/v1/company/{company_id}/clients/{client_id}/comments/{comment_id}
Удаляет комментарий к клиенту; не удаляет загруженные в карточку клиента файлы, загрузка которых породила создание комментария.

Authorizations:
BearerPartnerUser
path Parameters
company_id
required
number
Example: 123
Идентификатор филиала.

client_id
required
number
Example: 123
Идентификатор клиента филиала.

comment_id
required
number
Example: 123
Идентификатор комментария клиента.

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
Должен быть равен application/vnd.yclients.v2+json

Content-Type
required
string
Example: application/json
Должен быть равен application/json

Responses
204 No Content
Response Schema: application/json
success
boolean (Успешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

401 Unauthorized
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

403 Forbidden
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Сообщение об ошибке запроса)
Дополнительная информация о запросе.

404 Not Found
Response Schema: application/json
success
boolean (Неуспешный статус запроса)
Статус запроса.

data
object or null (Отсутствие данных по запросу)
Данные по запросу.

meta
object (Пустой объект дополнительной информации о запросе)
Дополнительная информация о запросе.

Response samples
204401403404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": null,
"meta": { }
}
Сетевые клиенты
Для работы с клиентами

Получить сетевого клиента по номеру телефона.

get
/api/v1/group/{group_id}/clients/
Параметр
group_id (required, number, 43877) - Id сети салонов
Фильтрация клиентов
phone:'70001234567' (optional, string) - Телефон для фильтрации клиентов
Authorizations:
(beareruser)
path Parameters
group_id
required
number
ID сети салонов

query Parameters
phone
required
string
Example: phone='79264037640'
Телефон для фильтрации клиентов, обязательный параметр

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token.User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

404 Not Found
Response Schema: application/json
success
boolean
Статус успешности выполнения

data
string
Содержит null

meta
object
Объект с сообщением об ошибке

Response samples
200404
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"salon_group_id": 312,
"phone": "70001234567",
"clients": []
},
"meta": [ ]
}
Записи
Получить список записей

get
/api/v1/records/{company_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

query Parameters
page
number
Example: page=1
Номер страницы

count
number
Example: count=50
Количество записей на странице

staff_id
number
Example: staff_id=7572
ID сотрудника, если нужно только записи к конкретному сотруднику

client_id
number
Example: client_id=572
ID клиента. Если нужны записи к конкретному клиенту

created_user_id
number
Example: created_user_id=7572
ID пользователя создавшего запись. Если нужны записи созданные конкретным пользователем

start_date
date
Example: start_date=2019-01-01
Дата сеанса начина с (фильтр по дате сеанса). Если нужны записи на сеанс начиная с конкретной даты

end_date
date
Example: end_date=2019-05-01
Дата сеанса по. Если нужны записи на сеанс до конкретной даты

c_start_date
date
Example: c_start_date=2019-01-01
Дата создания записи начиная с(фильтр по дате создания записи). Если нужны записи созданные начиная с конкретной даты

c_end_date
date
Example: c_end_date=2019-05-01
Дата создания записи по(фильтр по дате создания записи).

changed_after
date
Example: changed_after=2019-01-01
Дата изменения/создания записи. Если нужны записи созданные/измененные начиная с конкретной даты и времени

changed_before
date
Example: changed_before=2019-05-01
Дата изменения/создания записи. Если нужны записи созданные/измененные до конкретной даты и времени

include_consumables
number
Example: include_consumables=0
Флаг для включения в ответ списка расходников по записям

include_finance_transactions
number
Example: include_finance_transactions=0
флаг для включения в ответ финансовых транзакций по записям

with_deleted
boolean
Включить в выдачу удаленные записи (with_deleted=1 вернет и удаленные записи)

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержит номер страницы и количество записей на странице)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": {
"page": 1,
"total_count": 10
}
}
Создать новую запись

post
/api/v1/records/{company_id}
Для групповых событий При создании записи в групповом событии параметр activity_id становится обязательным, параметры staff_id, services, datetime, seance_length становятся необязательными.

Дополнительные поля При создании дополнительных полей записи(см. раздел "Дополнительные поля") становится возможным передавать собственные значения для полей. Дополнительные поля уникальны для каждой компании. После создания дополнительных полей, их значения для конкретной записи могут передаваться в необязательном поле custom_fields в виде пар ключ-значение где ключ это поле "code" дополнительного поля. Пример:

Создали дополнительное поле записи с code="my_custom_field" type="number", и второе поле code="some_another_field" type="list"

Передали при создании записи еще один атрибут: custom_fields: { "my_custom_field": 123, "some_another_field": ["first value", "second value"] }

При получении данной записи методом GET впоследствии, это же значение дополнительных полей вернется в ответе

Authorizations:
(beareruser)
path Parameters
company_id
required
number
Example: 24699
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
staff_id
number
Идентификатор сотрудника

services
Array of objects
Параметры услуг (id, стоимость, скидка)

client
object
Параметры клиента (телефон, имя, email)

save_if_busy
boolean
Сохранять ли запись если время занято или нерабочее, или выдать ошибку

datetime
string <date-time>
Дата и время записи

seance_length
number
Длительность записи в секундах

send_sms
boolean
Отправлять ли смс с деталями записи клиенту

comment
string
Комментарий к записи

sms_remain_hours
number
За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)

email_remain_hours
number
За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)

attendance
number
Статус записи (2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит)

api_id
string
Идентификатор внешней системы

custom_color
string
Цвет записи

record_labels
Array of strings
Массив идентификаторов категорий записи

client_agreements
object or null
Юридические соглашения клиента

technical_break_duration
number or null [ 0 .. 3600 ]
Технический перерыв.

Строго кратно 300 (5 минутам).
Максимальное значение 3600 (1 час)
Если передан null или значение не передано — будет задан согласно настройкам в разделе Настройки → Журнал записи → Технические перерывы при наличии услуг с перерывом
custom_fields
object
Дополнительные поля записи

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
Array of objects
Массив объектов с данными

meta
object
Метаданные (содержит номер страницы и количество записей на странице)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"staff_id": 8886,
"services": [
{},
{}
],
"client": {
"phone": "79169999900",
"name": "Дмитрий",
"surname": "",
"patronymic": "",
"email": "d@yclients.com"
},
"save_if_busy": false,
"datetime": "2019-01-01 17:00:00",
"seance_length": 3600,
"send_sms": true,
"comment": "тестовая запись!",
"sms_remain_hours": 6,
"email_remain_hours": 24,
"attendance": 1,
"api_id": "777",
"custom_color": "f44336",
"record_labels": [
"67345",
"104474"
],
"custom_fields": {
"my_custom_field": 123,
"some_another_field": []
},
"client_agreements": {
"is_newsletter_allowed": false,
"is_personal_data_processing_allowed": true
}
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{},
{}
],
"meta": {
"page": 1,
"total_count": 10
}
}
Получить список записей партнёра

get
/api/v1/records/partner/
Authorizations:
(beareruser)
query Parameters
page
number
Example: page=1
Номер страницы

editable_length
number
Example: editable_length=50
Количество записей на странице, максимум 100

salon_id
number
Example: salon_id=1
ID филиала

start_date
string
Example: start_date='17.01.2018'
Фильтр по дате визита с

end_date
string
Example: end_date='17.01.2018'
Фильтр по дате визита по

created_start_date
string
Example: created_start_date='17.01.2018'
Фильтр по дате создания записи с

created_end_date
string
Example: created_end_date='17.01.2018'
Фильтр по дате создания записи по

user_id
number
Example: user_id=1
ID пользователя

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": [
{}
],
"meta": {
"count": 1
}
}
Получить запись

get
/api/v1/record/{company_id}/{record_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

record_id
required
number
ID записи

query Parameters
include_consumables
number
Example: include_consumables=0
include_finance_transactions
number
Example: include_finance_transactions=0
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 2,
"company_id": 4564,
"staff_id": 9,
"services": [],
"goods_transactions": [ ],
"staff": {},
"client": {},
"comer": null,
"clients_count": 1,
"date": "2019-01-01 12:00:00",
"datetime": "2019-01-01T12:00:00+09:00",
"create_date": "2019-01-17T19:41:44+0900",
"comment": "не записывать",
"visit_attendance": 0,
"attendance": 0,
"confirmed": 1,
"seance_length": 3600,
"length": 3600,
"sms_before": 0,
"sms_now": 0,
"sms_now_text": "",
"email_now": 0,
"notified": 0,
"master_request": 0,
"api_id": "",
"from_url": "",
"review_requested": 0,
"visit_id": "8263004",
"created_user_id": 1073232,
"deleted": false,
"paid_full": 0,
"payment_status": 0,
"prepaid": false,
"prepaid_confirmed": false,
"last_change_date": "2019-01-17T19:44:14+0900",
"custom_color": "f44336",
"custom_font_color": "#ffffff",
"record_labels": [],
"activity_id": 0,
"custom_fields": [ ],
"documents": [],
"sms_remain_hours": 5,
"email_remain_hours": 1,
"bookform_id": 0,
"record_from": "",
"is_mobile": 0,
"is_sale_bill_printed": false,
"consumables": [],
"finance_transactions": []
},
"meta": [ ]
}
Изменить запись

put
/api/v1/record/{company_id}/{record_id}
При изменении записи в групповом событии параметр activity_id становится обязательным, параметры staff_id, services, datetime, seance_length становятся необязательными

Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

record_id
required
number
ID записи

query Parameters
include_consumables
number
Example: include_consumables=0
include_finance_transactions
number
Example: include_finance_transactions=0
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
staff_id
number
Идентификатор сотрудника

services
Array of objects
Параметры услуг (id, стоимость, скидка)

client
object
Параметры клиента (телефон, имя, email)

save_if_busy
boolean
Сохранять ли запись если время занято или нерабочее, или выдать ошибку

datetime
string <date-time>
Дата и время записи

seance_length
number
Длительность записи в секундах

send_sms
boolean
Отправлять ли смс с деталями записи клиенту

comment
string
Комментарий к записи

sms_remain_hours
number
За сколько часов до визита следует выслать смс напоминание клиенту (0 - если не нужно)

email_remain_hours
number
За сколько часов до визита следует выслать email напоминание клиенту (0 - если не нужно)

attendance
number
Статус записи (2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит)

api_id
string
Идентификатор внешней системы

custom_color
string
Цвет записи

record_labels
Array of strings
Массив идентификаторов категорий записи

client_agreements
object or null
Юридические соглашения клиента

technical_break_duration
number or null [ 0 .. 3600 ]
Технический перерыв.

Строго кратно 300 (5 минутам).
Максимальное значение 3600 (1 час)
Если передан null или значение не передано — будет задан согласно настройкам в разделе Настройки → Журнал записи → Технические перерывы при наличии услуг с перерывом
custom_fields
object
Дополнительные поля записи

Responses
201 Created
Response Schema: application/json
success
boolean
Статус успешного выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Request samples
Payload
Content type
application/json

Copy
Expand allCollapse all
{
"staff_id": 8886,
"services": [
{},
{}
],
"client": {
"phone": "79169999900",
"name": "Дмитрий",
"surname": "",
"patronymic": "",
"email": "d@yclients.com"
},
"save_if_busy": false,
"datetime": "2019-01-01 17:00:00",
"seance_length": 3600,
"send_sms": true,
"comment": "тестовая запись!",
"sms_remain_hours": 6,
"email_remain_hours": 24,
"attendance": 1,
"api_id": "777",
"custom_color": "f44336",
"record_labels": [
"67345",
"104474"
],
"custom_fields": {
"my_custom_field": 123,
"some_another_field": []
},
"client_agreements": {
"is_newsletter_allowed": false,
"is_personal_data_processing_allowed": true
}
}
Response samples
201
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"id": 999,
"services": [],
"client": {},
"clients_count": 1,
"staff": {},
"datetime": "2019-01-17 11:00:00",
"seance_length": 3600,
"create_date": "2019-01-05T15:35:06+0500",
"comment": "тестовая запись!",
"visit_attendance": 1,
"confirmed": 1,
"sms_before": 6,
"sms_now": 1,
"sms_now_text": "",
"email_now": 1,
"notified": 0,
"master_request": 1,
"api_id": "",
"from_url": "",
"review_requested": 0,
"activity_id": 0,
"documents": []
},
"meta": [ ]
}
Удалить запись

delete
/api/v1/record/{company_id}/{record_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

record_id
required
number
ID записи

query Parameters
include_consumables
number
Example: include_consumables=0
include_finance_transactions
number
Example: include_finance_transactions=0
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
204 No Content
Визиты

Для работы с визитами

Получить визит

get
/api/v1/visits/{visit_id}
Authorizations:
(beareruser)
path Parameters
visit_id
required
number
Example: ID визита
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"attendance": 1,
"datetime": "2018-03-22T17:55:14+0300",
"comment": 0,
"records": []
},
"meta": [ ]
}
Получить детали визита

get
/api/v1/visit/details/{salon_id}/{record_id}/{visit_id}
Блок "kkm_transaction_details_container"

Флаг "last_operation_type"

Значение	Описание
0	Распечатать чек возврата
1	Распечатать чек продажи
Типы всех операций c ККМ

Значение	Описание
0	Операция продажи (активна для документа с типом "Визит")
1	Операция возврата продажи (активна для документа с типом "Визит")
2	Операция коррекции
4	Операция открытия смены
5	Операция закрытия смены
9	Операция получения статуса ККМ
11	Операция получения статуса команды ККМ
12	Операция коррекции
13	Печать X-отчёта
6	Внесение наличных
7	Изъятие наличных
Статусы всех операций с ККМ

Значение	Описание
0	Ошибка соединения с KKM
1	Успешно
2	Отправлен на печать
3	Ошибка выполнения
4	Ошибка проверки статуса
5	Ожидание готовности KKM
Типы документов

Значение	Описание
1	Продажа товара
2	Оказание услуг
3	Приход товара
4	Списание товара
5	Движение товара
6	Инвентаризация
7	Визит
8	Списание расходников
Authorizations:
(beareruser)
path Parameters
salon_id
required
number
Example: ID филиала
record_id
required
number
Example: ID записи
visit_id
required
number
Example: ID визита
header Parameters
Accept
required
string
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer access_token, User user_token

Responses
200 OK
Response Schema: application/json
success
boolean
Статус успешности выполнения (true)

data
object
Объект с данными

meta
Array of objects
Метаданные (пустой массив)

Response samples
200
Content type
application/json

Copy
Expand allCollapse all
{
"success": true,
"data": {
"payment_transactions": [],
"loyalty_transactions": [],
"kkm_transaction_details_container": {},
"items": []
},
"meta": [ ]
}
Изменить визит

put
/api/v1/visits/{visit_id}/{record_id}
Authorizations:
(beareruser)
path Parameters
visit_id
required
number
Example: ID визита
record_id
required
number
Example: ID запись
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: */*
attendance
required
number
Статус визита (2 - Пользователь подтвердил запись, 1 - Пользователь пришел, услуги оказаны, 0 - ожидание пользователя, -1 - пользователь не пришел на визит)

comment
required
string
Комментарий

new_transactions
Array of objects
Массив объектов новых товарных транзакций

deleted_transaction_ids
Array of objects
Массив ID экземпляров

goods_transactions
Array of objects
Массив объектов товарных транзакций

services
Array of objects
Массив объектов с услугами

fast_payment
number
Быстрая оплата 1 - наличными, 2 - безналичными, 129 - наличными и распечатать, 130 - безналичными и распечатать

Responses
200 OK
Чек PDF по визиту

get
/api/v1/attendance/receipt_print/{visit_id}
Authorizations:
(beareruser)
path Parameters
visit_id
required
number
Example: ID визита
header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Responses
200 OK
Response samples
200
Content type
application/pdf

Copy
Групповые события
Для управлениями групповыми событиями используются следующие методы

Создание группового события

post
/api/v1/activity/{company_id}
Authorizations:
(beareruser)
path Parameters
company_id
required
number
ID компании

header Parameters
Accept
required
string
Example: application/vnd.yclients.v2+json
e.g. application/vnd.yclients.v2+json

Content-Type
required
string
application/json

Authorization
required
string
Bearer partner_token, User user_token

Request Body schema: application/json
date
required
string <date-time>
Дата и время

service_id
required
number
Идентификатор услуги

staff_id
required
number
Идентификатор сотрудника

capacity
required
number
Вместимость

resource_instance_ids
Array of numbers
Массив идентификаторов экземпляров ресурсов

force
required
boolean
Игнорировать ошибки (занятость мастера/ресурсов и т.п.)

length
number
Длительность события в секундах

color
string
Цвет события

label_ids
Array of arrays
Категории событий

comment
string
Комментарий события

stream_link
string
Ссылка на онлайн-событие

technical_break_duration
number
Длительность технического перерыва

Если не передан. Значение по умолчанию null
Значение null, соответствует общей настройке филиала, и задается в разделе Настройки → Журнал записи → Технические перерывы или оставляет текущее значение technical_break_duration при обновлении события
Если значение > 0, длинна перерыва должна быть учтена в параметре length (length должен быть передан как сумма перерыва и услуг)
Параметр принимает только значения, кратные 300 (5-минутные интервалы)
Максимальное допустимое значение 3600 (1 час)
instructions
string
Инструкции

